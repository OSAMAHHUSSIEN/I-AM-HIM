<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#0A0A0F">
<link rel="manifest" href="data:application/json,{%22name%22:%22BEAST%20MODE%22,%22short_name%22:%22BEAST%22,%22start_url%22:%22.%22,%22display%22:%22standalone%22,%22background_color%22:%22%230A0A0F%22,%22theme_color%22:%22%230A0A0F%22}">
<title>BEAST MODE - ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù†Ø§Ø¯ÙŠ</title>
</head>
<body style="margin:0;padding:0;background:#0A0A0F;">
<div id="root"></div>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
<script type="text/babel">
const { useState, useEffect, useRef, useCallback, useMemo } = React;

// ===== DATA & CONSTANTS =====
const EXERCISES_DB = {
  chest: {
    name: "Ø§Ù„ØµØ¯Ø±",
    icon: "ğŸ”¥",
    color: "#FF4444",
    exercises: [
      { id: "bench", name: "Ø¨Ù†Ø´ Ø¨Ø±ÙŠØ³ Ù…Ø³Ø·Ø­ (Ø¨Ø§Ø±)", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "incline_bar", name: "Ø¨Ù†Ø´ Ù…Ø§Ø¦Ù„ Ø¨Ø§Ø±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "decline_bar", name: "Ø¯ÙŠÙƒÙ„Ø§ÙŠÙ† Ø¨Ù†Ø´ Ø¨Ø§Ø±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "db_bench", name: "Ø¨Ù†Ø´ Ø¨Ø±ÙŠØ³ Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "incline_db", name: "Ø¨Ù†Ø´ Ù…Ø§Ø¦Ù„ Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "decline_db", name: "Ø¯ÙŠÙƒÙ„Ø§ÙŠÙ† Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "fly", name: "ÙÙ„Ø§ÙŠ Ø¯Ù…Ø¨Ù„ Ù…Ø³Ø·Ø­", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-15" },
      { id: "incline_fly", name: "ÙÙ„Ø§ÙŠ Ø¯Ù…Ø¨Ù„ Ù…Ø§Ø¦Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-15" },
      { id: "crossover", name: "ÙƒØ±ÙˆØ³ Ø§ÙˆÙØ± ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "low_cable", name: "ÙƒÙŠØ¨Ù„ Ø³ÙÙ„ÙŠ Ù„Ù„ØµØ¯Ø± Ø§Ù„Ø¹Ù„ÙˆÙŠ", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "chest_press_m", name: "ØªØ´Ø³Øª Ø¨Ø±ÙŠØ³ Ø¬Ù‡Ø§Ø²", type: "Ù…Ø±ÙƒØ¨ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-12" },
      { id: "pec_deck", name: "Ø¨Ùƒ Ø¯Ùƒ (ÙØ±Ø§Ø´Ø©)", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "12-15" },
      { id: "pushup", name: "Ø¨ÙˆØ´ Ø§Ø¨", type: "ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "15-25" },
      { id: "diamond_push", name: "Ø¯Ø§ÙŠÙ…ÙˆÙ†Ø¯ Ø¨ÙˆØ´ Ø§Ø¨", type: "ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "10-15" },
      { id: "wide_push", name: "Ø¨ÙˆØ´ Ø§Ø¨ Ø¹Ø±ÙŠØ¶", type: "ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "15-20" },
      { id: "dip_chest", name: "Ø¯ÙŠØ¨Ø³ ØµØ¯Ø±", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "8-15" },
    ]
  },
  back: {
    name: "Ø§Ù„Ø¸Ù‡Ø±",
    icon: "âš¡",
    color: "#4488FF",
    exercises: [
      { id: "deadlift", name: "Ø¯ÙŠØ¯Ù„ÙØª ØªÙ‚Ù„ÙŠØ¯ÙŠ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "5-8" },
      { id: "sumo_dead", name: "Ø¯ÙŠØ¯Ù„ÙØª Ø³ÙˆÙ…Ùˆ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "5-8" },
      { id: "romanian", name: "Ø±ÙˆÙ…Ø§Ù†ÙŠØ§Ù† Ø¯ÙŠØ¯Ù„ÙØª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "barrow", name: "ØªØ¬Ø¯ÙŠÙ Ø¨Ø§Ø± Ø§ÙˆÙØ±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "pendlay", name: "ØªØ¬Ø¯ÙŠÙ Ø¨Ù†Ø¯Ù„ÙŠ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "tbar", name: "ØªÙŠ Ø¨Ø§Ø± Ø±Ùˆ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "dbrow", name: "ØªØ¬Ø¯ÙŠÙ Ø¯Ù…Ø¨Ù„ Ø°Ø±Ø§Ø¹ ÙˆØ§Ø­Ø¯Ø©", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "pullup", name: "Ø¨ÙˆÙ„ Ø§Ø¨", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 4, reps: "6-12" },
      { id: "chinup", name: "ØªØ´Ù† Ø§Ø¨", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 4, reps: "6-12" },
      { id: "latpull", name: "Ù„Ø§Øª Ø¨ÙˆÙ„Ø¯Ø§ÙˆÙ† Ø¹Ø±ÙŠØ¶", type: "Ù…Ø±ÙƒØ¨ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "8-12" },
      { id: "closelat", name: "Ù„Ø§Øª Ø¨ÙˆÙ„Ø¯Ø§ÙˆÙ† Ø¶ÙŠÙ‚", type: "Ù…Ø±ÙƒØ¨ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-12" },
      { id: "cablerow", name: "ÙƒÙŠØ¨Ù„ Ø±Ùˆ Ø¬Ø§Ù„Ø³", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-15" },
      { id: "face_pull_back", name: "ÙÙŠØ³ Ø¨ÙˆÙ„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "15-20" },
      { id: "straight_arm", name: "Ø³ØªØ±ÙŠØª Ø§Ø±Ù… Ø¨ÙˆÙ„Ø¯Ø§ÙˆÙ†", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "machine_row", name: "ØªØ¬Ø¯ÙŠÙ Ø¬Ù‡Ø§Ø²", type: "Ù…Ø±ÙƒØ¨ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-12" },
      { id: "hyper_ext", name: "Ù‡Ø§ÙŠØ¨Ø± Ø§ÙƒØ³ØªÙ†Ø´Ù†", type: "Ø¹Ø²Ù„ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "12-15" },
      { id: "inverted_row", name: "Ø§Ù†ÙØ±ØªØ¯ Ø±Ùˆ", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "10-15" },
    ]
  },
  shoulders: {
    name: "Ø§Ù„Ø§ÙƒØªØ§Ù",
    icon: "ğŸ’¥",
    color: "#FF8800",
    exercises: [
      { id: "ohp_bar", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø¨Ø±ÙŠØ³ Ø¨Ø§Ø± ÙˆØ§Ù‚Ù", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "ohp_seated", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø¨Ø±ÙŠØ³ Ø¨Ø§Ø± Ø¬Ø§Ù„Ø³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "db_press", name: "Ø´ÙˆÙ„Ø¯Ø± Ø¨Ø±ÙŠØ³ Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "arnold", name: "Ø§Ø±Ù†ÙˆÙ„Ø¯ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "lateral", name: "Ù„Ø§ØªØ±Ø§Ù„ Ø±ÙŠØ² Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 4, reps: "12-15" },
      { id: "cable_lateral", name: "Ù„Ø§ØªØ±Ø§Ù„ Ø±ÙŠØ² ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "front", name: "ÙØ±ÙˆÙ†Øª Ø±ÙŠØ² Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "12-15" },
      { id: "front_bar", name: "ÙØ±ÙˆÙ†Øª Ø±ÙŠØ² Ø¨Ø§Ø±", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "facepull", name: "ÙÙŠØ³ Ø¨ÙˆÙ„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "15-20" },
      { id: "revfly", name: "Ø±ÙŠÙØ±Ø³ ÙÙ„Ø§ÙŠ Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "12-15" },
      { id: "revfly_cable", name: "Ø±ÙŠÙØ±Ø³ ÙÙ„Ø§ÙŠ ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "upright_row", name: "Ø§Ø¨Ø±Ø§ÙŠØª Ø±Ùˆ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "shrug_db", name: "Ø´Ø±Ù‚Ø² Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 4, reps: "12-15" },
      { id: "shrug_bar", name: "Ø´Ø±Ù‚Ø² Ø¨Ø§Ø±", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 4, reps: "10-12" },
      { id: "machine_press", name: "Ø´ÙˆÙ„Ø¯Ø± Ø¨Ø±ÙŠØ³ Ø¬Ù‡Ø§Ø²", type: "Ù…Ø±ÙƒØ¨ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-12" },
      { id: "lateral_machine", name: "Ù„Ø§ØªØ±Ø§Ù„ Ø±ÙŠØ² Ø¬Ù‡Ø§Ø²", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "12-15" },
      { id: "pike_push", name: "Ø¨Ø§ÙŠÙƒ Ø¨ÙˆØ´ Ø§Ø¨", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "8-12" },
    ]
  },
  legs: {
    name: "Ø§Ù„Ø§Ø±Ø¬Ù„",
    icon: "ğŸ¦µ",
    color: "#44DD44",
    exercises: [
      { id: "squat", name: "Ø¨Ø§Ùƒ Ø³ÙƒÙˆØ§Øª Ø¨Ø§Ø±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "front_squat", name: "ÙØ±ÙˆÙ†Øª Ø³ÙƒÙˆØ§Øª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "goblet", name: "Ø¬ÙˆØ¨Ù„Øª Ø³ÙƒÙˆØ§Øª Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "bulgarian", name: "Ø¨Ù„ØºØ§Ø±ÙŠØ§Ù† Ø³Ø¨Ù„Øª Ø³ÙƒÙˆØ§Øª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "legpress", name: "Ù„ÙŠØ¬ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø¬Ù‡Ø§Ø²", sets: 4, reps: "8-12" },
      { id: "hack", name: "Ù‡Ø§Ùƒ Ø³ÙƒÙˆØ§Øª Ø¬Ù‡Ø§Ø²", type: "Ù…Ø±ÙƒØ¨ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "8-12" },
      { id: "lunges_db", name: "Ù„Ø§Ù†Ø¬Ø² Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "walking_lunge", name: "ÙˆØ§Ù„ÙƒÙ†Ø¬ Ù„Ø§Ù†Ø¬Ø²", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "12-16" },
      { id: "step_up", name: "Ø³ØªØ¨ Ø§Ø¨ Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "legcurl", name: "Ù„ÙŠØ¬ ÙƒÙŠØ±Ù„ Ø¬Ù‡Ø§Ø²", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-15" },
      { id: "seated_curl", name: "Ø³ÙŠØªØ¯ Ù„ÙŠØ¬ ÙƒÙŠØ±Ù„", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-15" },
      { id: "legext", name: "Ù„ÙŠØ¬ Ø§ÙƒØ³ØªÙ†Ø´Ù†", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-15" },
      { id: "hip_thrust", name: "Ù‡ÙŠØ¨ Ø«Ø±Ø³Øª Ø¨Ø§Ø±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "rdl_db", name: "Ø±ÙˆÙ…Ø§Ù†ÙŠØ§Ù† Ø¯ÙŠØ¯Ù„ÙØª Ø¯Ù…Ø¨Ù„", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "calf_standing", name: "ÙƒØ§Ù Ø±ÙŠØ² ÙˆØ§Ù‚Ù", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 4, reps: "15-20" },
      { id: "calf_seated", name: "ÙƒØ§Ù Ø±ÙŠØ² Ø¬Ø§Ù„Ø³", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 4, reps: "15-20" },
      { id: "adductor", name: "Ø§Ø¯Ø§ÙƒØªÙˆØ± (Ø¯Ø§Ø®Ù„ÙŠ)", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "12-15" },
      { id: "abductor", name: "Ø§Ø¨Ø¯Ø§ÙƒØªÙˆØ± (Ø®Ø§Ø±Ø¬ÙŠ)", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "12-15" },
      { id: "sissy_squat", name: "Ø³ÙŠØ³ÙŠ Ø³ÙƒÙˆØ§Øª", type: "Ø¹Ø²Ù„ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "10-15" },
    ]
  },
  biceps: {
    name: "Ø¨Ø§ÙŠ",
    icon: "ğŸ’ª",
    color: "#DD44DD",
    exercises: [
      { id: "barcurl", name: "Ø¨Ø§ÙŠ ÙƒÙŠØ±Ù„ Ø¨Ø§Ø± Ù…Ø³ØªÙ‚ÙŠÙ…", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "ezcurl", name: "Ø¨Ø§ÙŠ ÙƒÙŠØ±Ù„ Ø¨Ø§Ø± EZ", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "db_curl", name: "Ø¯Ù…Ø¨Ù„ ÙƒÙŠØ±Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "hammer", name: "Ù‡Ø§Ù…Ø± ÙƒÙŠØ±Ù„ Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "incline_curl", name: "Ø§Ù†ÙƒÙ„Ø§ÙŠÙ† ÙƒÙŠØ±Ù„ Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "concentration", name: "ÙƒÙˆÙ†Ø³Ù†ØªØ±ÙŠØ´Ù† ÙƒÙŠØ±Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-15" },
      { id: "preacher", name: "Ø¨Ø±ÙŠØªØ´Ø± ÙƒÙŠØ±Ù„ Ø¨Ø§Ø±", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "preacher_db", name: "Ø¨Ø±ÙŠØªØ´Ø± ÙƒÙŠØ±Ù„ Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "cable_curl", name: "ÙƒÙŠØ¨Ù„ ÙƒÙŠØ±Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-15" },
      { id: "rope_hammer", name: "Ù‡Ø§Ù…Ø± ÙƒÙŠØ±Ù„ Ø±ÙˆØ¨ ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "spider_curl", name: "Ø³Ø¨Ø§ÙŠØ¯Ø± ÙƒÙŠØ±Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "machine_curl", name: "Ø¨Ø§ÙŠ ÙƒÙŠØ±Ù„ Ø¬Ù‡Ø§Ø²", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-15" },
      { id: "21s", name: "ÙƒÙŠØ±Ù„ 21 (7-7-7)", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "21" },
    ]
  },
  triceps: {
    name: "ØªØ±Ø§ÙŠ",
    icon: "ğŸ”±",
    color: "#44DDDD",
    exercises: [
      { id: "close_bench", name: "ÙƒÙ„ÙˆØ² Ø¬Ø±ÙŠØ¨ Ø¨Ù†Ø´ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "8-12" },
      { id: "skull", name: "Ø³ÙƒÙ„ ÙƒØ±Ø§Ø´Ø± Ø¨Ø§Ø± EZ", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "skull_db", name: "Ø³ÙƒÙ„ ÙƒØ±Ø§Ø´Ø± Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "overhead_db", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø§ÙƒØ³ØªÙ†Ø´Ù† Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "10-12" },
      { id: "overhead_bar", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø§ÙƒØ³ØªÙ†Ø´Ù† Ø¨Ø§Ø±", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "kickback", name: "ØªØ±Ø§ÙŠ ÙƒÙŠÙƒ Ø¨Ø§Ùƒ Ø¯Ù…Ø¨Ù„", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "12-15" },
      { id: "pushdown_bar", name: "Ø¨ÙˆØ´Ø¯Ø§ÙˆÙ† Ø¨Ø§Ø± ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-15" },
      { id: "pushdown_rope", name: "Ø¨ÙˆØ´Ø¯Ø§ÙˆÙ† Ø±ÙˆØ¨ ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-15" },
      { id: "overhead_cable", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø§ÙƒØ³ØªÙ†Ø´Ù† ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "10-15" },
      { id: "dips", name: "Ø¯ÙŠØ¨Ø³", type: "Ù…Ø±ÙƒØ¨ - ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "8-15" },
      { id: "bench_dips", name: "Ø¨Ù†Ø´ Ø¯ÙŠØ¨Ø³", type: "ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "12-20" },
      { id: "diamond_tri", name: "Ø¯Ø§ÙŠÙ…ÙˆÙ†Ø¯ Ø¨ÙˆØ´ Ø§Ø¨", type: "ÙˆØ²Ù† Ø¬Ø³Ù…", sets: 3, reps: "10-15" },
      { id: "machine_tri", name: "ØªØ±Ø§ÙŠ Ø§ÙƒØ³ØªÙ†Ø´Ù† Ø¬Ù‡Ø§Ø²", type: "Ø¹Ø²Ù„ - Ø¬Ù‡Ø§Ø²", sets: 3, reps: "10-15" },
    ]
  },
  core: {
    name: "Ø§Ù„Ø¨Ø·Ù†",
    icon: "ğŸ¯",
    color: "#FFDD00",
    exercises: [
      { id: "plank", name: "Ø¨Ù„Ø§Ù†Ùƒ", type: "Ø«Ø¨Ø§Øª", sets: 3, reps: "30-60 Ø«Ø§Ù†ÙŠØ©" },
      { id: "side_plank", name: "Ø³Ø§ÙŠØ¯ Ø¨Ù„Ø§Ù†Ùƒ", type: "Ø«Ø¨Ø§Øª", sets: 3, reps: "30-45 Ø«Ø§Ù†ÙŠØ©" },
      { id: "crunch", name: "ÙƒØ±Ù†Ø´Ø²", type: "Ø¹Ø²Ù„", sets: 3, reps: "15-20" },
      { id: "reverse_crunch", name: "Ø±ÙŠÙØ±Ø³ ÙƒØ±Ù†Ø´", type: "Ø¹Ø²Ù„", sets: 3, reps: "12-15" },
      { id: "bicycle", name: "Ø¨Ø§ÙŠØ³ÙƒÙ„ ÙƒØ±Ù†Ø´", type: "Ø¹Ø²Ù„", sets: 3, reps: "20-30" },
      { id: "legraise", name: "Ù„ÙŠØ¬ Ø±ÙŠØ² (Ù…Ø³ØªÙ„Ù‚ÙŠ)", type: "Ø¹Ø²Ù„", sets: 3, reps: "12-15" },
      { id: "hanging_leg", name: "Ù‡Ø§Ù†Ø¬Ù†Ø¬ Ù„ÙŠØ¬ Ø±ÙŠØ²", type: "Ø¹Ø²Ù„ - Ù…Ø¹Ù„Ù‚", sets: 3, reps: "10-15" },
      { id: "hanging_knee", name: "Ù‡Ø§Ù†Ø¬Ù†Ø¬ Ù†ÙŠ Ø±ÙŠØ²", type: "Ø¹Ø²Ù„ - Ù…Ø¹Ù„Ù‚", sets: 3, reps: "12-15" },
      { id: "russian", name: "Ø±ÙˆØ´Ù† ØªÙˆÙŠØ³Øª", type: "Ø¹Ø²Ù„", sets: 3, reps: "20-30" },
      { id: "russian_weighted", name: "Ø±ÙˆØ´Ù† ØªÙˆÙŠØ³Øª Ø¨ÙˆØ²Ù†", type: "Ø¹Ø²Ù„ - Ø­Ø±", sets: 3, reps: "15-20" },
      { id: "cablecrunch", name: "ÙƒÙŠØ¨Ù„ ÙƒØ±Ù†Ø´", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "woodchop", name: "ÙˆÙˆØ¯ ØªØ´ÙˆØ¨ ÙƒÙŠØ¨Ù„", type: "Ø¹Ø²Ù„ - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "pallof", name: "Ø¨Ø§Ù„ÙˆÙ Ø¨Ø±ÙŠØ³ ÙƒÙŠØ¨Ù„", type: "Ø«Ø¨Ø§Øª - ÙƒÙŠØ¨Ù„", sets: 3, reps: "12-15" },
      { id: "ab_wheel", name: "Ø§Ø¨ ÙˆÙŠÙ„ Ø±ÙˆÙ„Ø§ÙˆØª", type: "Ø¹Ø²Ù„", sets: 3, reps: "8-12" },
      { id: "decline_sit", name: "Ø¯ÙŠÙƒÙ„Ø§ÙŠÙ† Ø³ÙŠØª Ø§Ø¨", type: "Ø¹Ø²Ù„", sets: 3, reps: "15-20" },
      { id: "vup", name: "ÙÙŠ Ø§Ø¨ (V-Up)", type: "Ø¹Ø²Ù„", sets: 3, reps: "12-15" },
      { id: "mountain", name: "Ù…Ø§ÙˆÙ†ØªÙ† ÙƒÙ„Ø§ÙŠÙ…Ø±", type: "ÙƒØ§Ø±Ø¯ÙŠÙˆ + Ø¨Ø·Ù†", sets: 3, reps: "30-45 Ø«Ø§Ù†ÙŠØ©" },
      { id: "dead_bug", name: "Ø¯ÙŠØ¯ Ø¨Ù‚", type: "Ø«Ø¨Ø§Øª", sets: 3, reps: "12-16" },
      { id: "flutter", name: "ÙÙ„Ø§ØªØ± ÙƒÙŠÙƒØ³", type: "Ø¹Ø²Ù„", sets: 3, reps: "20-30" },
      { id: "toe_touch", name: "ØªÙˆ ØªØ§ØªØ´ ÙƒØ±Ù†Ø´", type: "Ø¹Ø²Ù„", sets: 3, reps: "15-20" },
      { id: "dragon_flag", name: "Ø¯Ø±Ø§Ù‚ÙˆÙ† ÙÙ„Ø§Ø¬", type: "Ù…ØªÙ‚Ø¯Ù…", sets: 3, reps: "5-10" },
      { id: "l_sit", name: "Ø§Ù„ Ø³ÙŠØª", type: "Ø«Ø¨Ø§Øª - Ù…ØªÙ‚Ø¯Ù…", sets: 3, reps: "15-30 Ø«Ø§Ù†ÙŠØ©" },
    ]
  },
  freeweight: {
    name: "ØªÙ…Ø§Ø±ÙŠÙ† Ø­Ø±Ø© Ù…Ø±ÙƒØ¨Ø©",
    icon: "ğŸ‹ï¸",
    color: "#FF5577",
    exercises: [
      { id: "fw_squat", name: "Ø¨Ø§Ùƒ Ø³ÙƒÙˆØ§Øª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 5, reps: "5-8" },
      { id: "fw_deadlift", name: "Ø¯ÙŠØ¯Ù„ÙØª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 5, reps: "3-6" },
      { id: "fw_bench", name: "Ø¨Ù†Ø´ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 5, reps: "5-8" },
      { id: "fw_ohp", name: "Ø§ÙˆÙØ±Ù‡ÙŠØ¯ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "5-8" },
      { id: "fw_row", name: "Ø¨Ù†Øª Ø§ÙˆÙØ± Ø±Ùˆ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "6-10" },
      { id: "fw_clean", name: "Ø¨Ø§ÙˆØ± ÙƒÙ„ÙŠÙ†", type: "Ø§ÙˆÙ„ÙŠÙ…Ø¨ÙŠ - Ø­Ø±", sets: 4, reps: "3-5" },
      { id: "fw_snatch", name: "Ø¯Ù…Ø¨Ù„ Ø³Ù†Ø§ØªØ´", type: "Ø§ÙˆÙ„ÙŠÙ…Ø¨ÙŠ - Ø­Ø±", sets: 3, reps: "5-8" },
      { id: "fw_thruster", name: "Ø«Ø±Ø³ØªØ±", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "fw_farmers", name: "ÙØ§Ø±Ù…Ø±Ø² ÙˆÙˆÙƒ", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "30-40 Ù…ØªØ±" },
      { id: "fw_turkish", name: "ØªØ±ÙƒØ´ Ø¬Øª Ø§Ø¨", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "5 Ù„ÙƒÙ„ Ø¬Ù‡Ø©" },
      { id: "fw_clean_press", name: "ÙƒÙ„ÙŠÙ† Ø§Ù†Ø¯ Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "5-8" },
      { id: "fw_sumo_dead", name: "Ø³ÙˆÙ…Ùˆ Ø¯ÙŠØ¯Ù„ÙØª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 4, reps: "5-8" },
      { id: "fw_zercher", name: "Ø²ÙŠØ±ØªØ´Ø± Ø³ÙƒÙˆØ§Øª", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "6-10" },
      { id: "fw_floor_press", name: "ÙÙ„ÙˆØ± Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
      { id: "fw_landmine", name: "Ù„Ø§Ù†Ø¯Ù…Ø§ÙŠÙ† Ø¨Ø±ÙŠØ³", type: "Ù…Ø±ÙƒØ¨ - Ø­Ø±", sets: 3, reps: "8-12" },
    ]
  }
};

const SPLIT_TEMPLATES = {
  ppl: { name: "Push/Pull/Legs", days: ["Push", "Pull", "Legs", "Push", "Pull", "Legs", "Ø±Ø§Ø­Ø©"] },
  upper_lower: { name: "Upper/Lower", days: ["Upper", "Lower", "Ø±Ø§Ø­Ø©", "Upper", "Lower", "Ø±Ø§Ø­Ø©", "Ø±Ø§Ø­Ø©"] },
  bro: { name: "Bro Split", days: ["ØµØ¯Ø±", "Ø¸Ù‡Ø±", "Ø§ÙƒØªØ§Ù", "Ø§Ø±Ø¬Ù„", "Ø°Ø±Ø§Ø¹", "Ø±Ø§Ø­Ø©", "Ø±Ø§Ø­Ø©"] },
  full: { name: "Full Body", days: ["Full Body", "Ø±Ø§Ø­Ø©", "Full Body", "Ø±Ø§Ø­Ø©", "Full Body", "Ø±Ø§Ø­Ø©", "Ø±Ø§Ø­Ø©"] },
};

const WEEK_DAYS = ["Ø§Ù„Ø§Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", "Ø§Ù„Ø§Ø±Ø¨Ø¹Ø§Ø¡", "Ø§Ù„Ø®Ù…ÙŠØ³", "Ø§Ù„Ø¬Ù…Ø¹Ø©", "Ø§Ù„Ø³Ø¨Øª"];

// ===== FOOD DATABASE (per 100g) =====
const FOOD_DB = [
  // Ø¨Ø±ÙˆØªÙŠÙ†
  { id: "f1", name: "ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 165, p: 31, c: 0, f: 3.6, icon: "ğŸ—" },
  { id: "f2", name: "ØµØ¯ÙˆØ± Ø¯Ø¬Ø§Ø¬ Ù…Ø³Ù„ÙˆÙ‚", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 150, p: 30, c: 0, f: 3, icon: "ğŸ—" },
  { id: "f3", name: "ÙØ®Ø° Ø¯Ø¬Ø§Ø¬ Ø¨Ø¯ÙˆÙ† Ø¬Ù„Ø¯", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 177, p: 24, c: 0, f: 8, icon: "ğŸ—" },
  { id: "f4", name: "Ø³ØªÙŠÙƒ Ù„Ø­Ù… Ø¨Ù‚Ø±", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 271, p: 26, c: 0, f: 18, icon: "ğŸ¥©" },
  { id: "f5", name: "Ù„Ø­Ù… Ø¨Ù‚Ø± Ù…ÙØ±ÙˆÙ… 95%", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 137, p: 28, c: 0, f: 5, icon: "ğŸ¥©" },
  { id: "f6", name: "Ù„Ø­Ù… Ø¨Ù‚Ø± Ù…ÙØ±ÙˆÙ… 80%", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 254, p: 17, c: 0, f: 20, icon: "ğŸ¥©" },
  { id: "f7", name: "Ø³Ù…Ùƒ ØªÙˆÙ†Ø© Ù…Ø¹Ù„Ø¨", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 116, p: 26, c: 0, f: 1, icon: "ğŸŸ" },
  { id: "f8", name: "Ø³Ù…Ùƒ Ø³Ù„Ù…ÙˆÙ†", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 208, p: 20, c: 0, f: 13, icon: "ğŸŸ" },
  { id: "f9", name: "Ø³Ù…Ùƒ ØªÙ„Ø§Ø¨ÙŠØ§", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 128, p: 26, c: 0, f: 2.7, icon: "ğŸŸ" },
  { id: "f10", name: "Ø±Ø¨ÙŠØ§Ù† (Ø¬Ù…Ø¨Ø±ÙŠ)", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 99, p: 24, c: 0.2, f: 0.3, icon: "ğŸ¦" },
  { id: "f11", name: "Ø¨ÙŠØ¶Ø© ÙƒØ§Ù…Ù„Ø© (50 Ø¬Ù…)", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 155, p: 13, c: 1.1, f: 11, icon: "ğŸ¥š" },
  { id: "f12", name: "Ø¨ÙŠØ§Ø¶ Ø¨ÙŠØ¶ (100 Ø¬Ù…)", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 52, p: 11, c: 0.7, f: 0.2, icon: "ğŸ¥š" },
  { id: "f13", name: "ØµØ¯Ø± Ø¯ÙŠÙƒ Ø±ÙˆÙ…ÙŠ", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 135, p: 30, c: 0, f: 1, icon: "ğŸ—" },
  { id: "f14", name: "ÙƒØ¨Ø¯Ø© Ø¯Ø¬Ø§Ø¬", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 172, p: 26, c: 1, f: 6, icon: "ğŸ–" },
  { id: "f15", name: "Ù„Ø­Ù… ØºÙ†Ù…", cat: "Ø¨Ø±ÙˆØªÙŠÙ†", cal: 282, p: 25, c: 0, f: 20, icon: "ğŸ¥©" },
  // ÙƒØ§Ø±Ø¨
  { id: "f20", name: "Ø§Ø±Ø² Ø§Ø¨ÙŠØ¶ Ù…Ø·Ø¨ÙˆØ®", cat: "ÙƒØ§Ø±Ø¨", cal: 130, p: 2.7, c: 28, f: 0.3, icon: "ğŸš" },
  { id: "f21", name: "Ø§Ø±Ø² Ø¨Ù†ÙŠ Ù…Ø·Ø¨ÙˆØ®", cat: "ÙƒØ§Ø±Ø¨", cal: 123, p: 2.7, c: 26, f: 1, icon: "ğŸš" },
  { id: "f22", name: "Ø´ÙˆÙØ§Ù† Ø¬Ø§Ù", cat: "ÙƒØ§Ø±Ø¨", cal: 389, p: 17, c: 66, f: 7, icon: "ğŸ¥£" },
  { id: "f23", name: "Ø¨Ø·Ø§Ø·Ø§ Ø­Ù„ÙˆØ© Ù…Ø´ÙˆÙŠØ©", cat: "ÙƒØ§Ø±Ø¨", cal: 90, p: 2, c: 21, f: 0.1, icon: "ğŸ " },
  { id: "f24", name: "Ø¨Ø·Ø§Ø·Ø³ Ù…Ø³Ù„ÙˆÙ‚Ø©", cat: "ÙƒØ§Ø±Ø¨", cal: 87, p: 1.9, c: 20, f: 0.1, icon: "ğŸ¥”" },
  { id: "f25", name: "Ø®Ø¨Ø² Ø§Ø³Ù…Ø± (Ø´Ø±ÙŠØ­Ø© 30 Ø¬Ù…)", cat: "ÙƒØ§Ø±Ø¨", cal: 247, p: 13, c: 41, f: 3.4, icon: "ğŸ" },
  { id: "f26", name: "Ø®Ø¨Ø² Ø§Ø¨ÙŠØ¶ (Ø´Ø±ÙŠØ­Ø© 30 Ø¬Ù…)", cat: "ÙƒØ§Ø±Ø¨", cal: 265, p: 9, c: 49, f: 3.2, icon: "ğŸ" },
  { id: "f27", name: "Ù…Ø¹ÙƒØ±ÙˆÙ†Ø© Ù…Ø·Ø¨ÙˆØ®Ø©", cat: "ÙƒØ§Ø±Ø¨", cal: 131, p: 5, c: 25, f: 1.1, icon: "ğŸ" },
  { id: "f28", name: "ÙƒÙŠÙ†ÙˆØ§ Ù…Ø·Ø¨ÙˆØ®Ø©", cat: "ÙƒØ§Ø±Ø¨", cal: 120, p: 4.4, c: 21, f: 1.9, icon: "ğŸ¥—" },
  { id: "f29", name: "Ø®Ø¨Ø² ØªÙˆØ±ØªÙŠÙ„Ø§ Ù‚Ù…Ø­", cat: "ÙƒØ§Ø±Ø¨", cal: 312, p: 8, c: 52, f: 8, icon: "ğŸ«“" },
  { id: "f30", name: "Ù…ÙˆØ² (Ø­Ø¨Ø© 120 Ø¬Ù…)", cat: "ÙƒØ§Ø±Ø¨", cal: 89, p: 1.1, c: 23, f: 0.3, icon: "ğŸŒ" },
  { id: "f31", name: "ØªÙ…Ø± (100 Ø¬Ù…)", cat: "ÙƒØ§Ø±Ø¨", cal: 277, p: 1.8, c: 75, f: 0.2, icon: "ğŸŒ´" },
  { id: "f32", name: "Ø¹Ø³Ù„", cat: "ÙƒØ§Ø±Ø¨", cal: 304, p: 0.3, c: 82, f: 0, icon: "ğŸ¯" },
  // Ø¯Ù‡ÙˆÙ† ØµØ­ÙŠØ©
  { id: "f40", name: "Ø²ÙŠØª Ø²ÙŠØªÙˆÙ† (Ù…Ù„Ø¹Ù‚Ø© 15 Ù…Ù„)", cat: "Ø¯Ù‡ÙˆÙ†", cal: 884, p: 0, c: 0, f: 100, icon: "ğŸ«’" },
  { id: "f41", name: "Ø²Ø¨Ø¯Ø© ÙÙˆÙ„ Ø³ÙˆØ¯Ø§Ù†ÙŠ", cat: "Ø¯Ù‡ÙˆÙ†", cal: 588, p: 25, c: 20, f: 50, icon: "ğŸ¥œ" },
  { id: "f42", name: "Ù„ÙˆØ²", cat: "Ø¯Ù‡ÙˆÙ†", cal: 579, p: 21, c: 22, f: 50, icon: "ğŸ¥œ" },
  { id: "f43", name: "Ø¬ÙˆØ²", cat: "Ø¯Ù‡ÙˆÙ†", cal: 654, p: 15, c: 14, f: 65, icon: "ğŸ¥œ" },
  { id: "f44", name: "Ø§ÙÙˆÙƒØ§Ø¯Ùˆ", cat: "Ø¯Ù‡ÙˆÙ†", cal: 160, p: 2, c: 9, f: 15, icon: "ğŸ¥‘" },
  { id: "f45", name: "ÙƒØ§Ø¬Ùˆ", cat: "Ø¯Ù‡ÙˆÙ†", cal: 553, p: 18, c: 30, f: 44, icon: "ğŸ¥œ" },
  { id: "f46", name: "Ø¨Ø°ÙˆØ± Ø´ÙŠØ§", cat: "Ø¯Ù‡ÙˆÙ†", cal: 486, p: 17, c: 42, f: 31, icon: "ğŸŒ±" },
  { id: "f47", name: "Ø¨Ø°ÙˆØ± ÙƒØªØ§Ù†", cat: "Ø¯Ù‡ÙˆÙ†", cal: 534, p: 18, c: 29, f: 42, icon: "ğŸŒ±" },
  { id: "f48", name: "Ø²Ø¨Ø¯Ø© Ù„ÙˆØ²", cat: "Ø¯Ù‡ÙˆÙ†", cal: 614, p: 21, c: 19, f: 56, icon: "ğŸ¥œ" },
  // Ø§Ù„Ø¨Ø§Ù†
  { id: "f50", name: "Ø­Ù„ÙŠØ¨ ÙƒØ§Ù…Ù„ Ø§Ù„Ø¯Ø³Ù…", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 61, p: 3.2, c: 4.8, f: 3.3, icon: "ğŸ¥›" },
  { id: "f51", name: "Ø­Ù„ÙŠØ¨ Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø³Ù…", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 42, p: 3.4, c: 5, f: 1, icon: "ğŸ¥›" },
  { id: "f52", name: "Ø²Ø¨Ø§Ø¯ÙŠ ÙŠÙˆÙ†Ø§Ù†ÙŠ", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 97, p: 9, c: 3.6, f: 5, icon: "ğŸ¥›" },
  { id: "f53", name: "Ø²Ø¨Ø§Ø¯ÙŠ Ù‚Ù„ÙŠÙ„ Ø§Ù„Ø¯Ø³Ù…", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 63, p: 5.3, c: 7.7, f: 1.6, icon: "ğŸ¥›" },
  { id: "f54", name: "Ø¬Ø¨Ù†Ø© Ù‚Ø±ÙŠØ´", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 72, p: 12, c: 2.7, f: 1, icon: "ğŸ§€" },
  { id: "f55", name: "Ø¬Ø¨Ù†Ø© Ø´ÙŠØ¯Ø±", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 403, p: 25, c: 1.3, f: 33, icon: "ğŸ§€" },
  { id: "f56", name: "Ø¬Ø¨Ù†Ø© Ù…ÙˆØ²Ø§Ø±ÙŠÙ„Ø§", cat: "Ø§Ù„Ø¨Ø§Ù†", cal: 280, p: 28, c: 3.1, f: 17, icon: "ğŸ§€" },
  // Ù…ÙƒÙ…Ù„Ø§Øª
  { id: "f60", name: "ÙˆØ§ÙŠ Ø¨Ø±ÙˆØªÙŠÙ† (Ø³ÙƒÙˆØ¨ 30 Ø¬Ù…)", cat: "Ù…ÙƒÙ…Ù„Ø§Øª", cal: 120, p: 24, c: 3, f: 1.5, icon: "ğŸ’Š" },
  { id: "f61", name: "ÙƒØ§Ø²ÙŠÙ† Ø¨Ø±ÙˆØªÙŠÙ† (Ø³ÙƒÙˆØ¨ 30 Ø¬Ù…)", cat: "Ù…ÙƒÙ…Ù„Ø§Øª", cal: 120, p: 24, c: 3, f: 1, icon: "ğŸ’Š" },
  { id: "f62", name: "Ø¨Ø±ÙˆØªÙŠÙ† Ø¨Ø§Ø± Ù…ØªÙˆØ³Ø·", cat: "Ù…ÙƒÙ…Ù„Ø§Øª", cal: 200, p: 20, c: 22, f: 7, icon: "ğŸ’Š" },
  // Ø®Ø¶Ø±ÙˆØ§Øª
  { id: "f70", name: "Ø¨Ø±ÙˆÙƒÙ„ÙŠ", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 34, p: 2.8, c: 7, f: 0.4, icon: "ğŸ¥¦" },
  { id: "f71", name: "Ø³Ø¨Ø§Ù†Ø®", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 23, p: 2.9, c: 3.6, f: 0.4, icon: "ğŸ¥¬" },
  { id: "f72", name: "Ø®ÙŠØ§Ø±", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 15, p: 0.7, c: 3.6, f: 0.1, icon: "ğŸ¥’" },
  { id: "f73", name: "Ø·Ù…Ø§Ø·Ù…", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 18, p: 0.9, c: 3.9, f: 0.2, icon: "ğŸ…" },
  { id: "f74", name: "ÙÙ„ÙÙ„ Ø±ÙˆÙ…ÙŠ", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 31, p: 1, c: 6, f: 0.3, icon: "ğŸ«‘" },
  { id: "f75", name: "Ø¬Ø²Ø±", cat: "Ø®Ø¶Ø±ÙˆØ§Øª", cal: 41, p: 0.9, c: 10, f: 0.2, icon: "ğŸ¥•" },
  // ÙˆØ¬Ø¨Ø§Øª Ø³Ø±ÙŠØ¹Ø© Ø´Ø§Ø¦Ø¹Ø©
  { id: "f80", name: "ÙƒØ¨Ø³Ø© Ø¯Ø¬Ø§Ø¬ (Ø·Ø¨Ù‚)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 350, p: 25, c: 40, f: 10, icon: "ğŸ›" },
  { id: "f81", name: "ÙƒØ¨Ø³Ø© Ù„Ø­Ù… (Ø·Ø¨Ù‚)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 420, p: 22, c: 42, f: 18, icon: "ğŸ›" },
  { id: "f82", name: "Ù…Ù†Ø¯ÙŠ Ø¯Ø¬Ø§Ø¬ (Ø·Ø¨Ù‚)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 380, p: 28, c: 38, f: 12, icon: "ğŸ›" },
  { id: "f83", name: "Ø´Ø§ÙˆØ±Ù…Ø§ Ø¯Ø¬Ø§Ø¬ (Ø³Ø§Ù†Ø¯ÙˆÙŠØªØ´)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 430, p: 25, c: 40, f: 18, icon: "ğŸŒ¯" },
  { id: "f84", name: "ÙÙˆÙ„ Ù…Ø¯Ù…Ø³ (Ø·Ø¨Ù‚)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 187, p: 13, c: 24, f: 4, icon: "ğŸ«˜" },
  { id: "f85", name: "Ø­Ù…Øµ Ø¨Ø§Ù„Ø·Ø­ÙŠÙ†Ø© (100 Ø¬Ù…)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 166, p: 8, c: 14, f: 10, icon: "ğŸ«˜" },
  { id: "f86", name: "ÙÙ„Ø§ÙÙ„ (5 Ø­Ø¨Ø§Øª)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 333, p: 13, c: 32, f: 18, icon: "ğŸ§†" },
  { id: "f87", name: "Ø³Ù„Ø·Ø© Ø³ÙŠØ²Ø± Ø¨Ø§Ù„Ø¯Ø¬Ø§Ø¬", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 180, p: 15, c: 8, f: 10, icon: "ğŸ¥—" },
  { id: "f88", name: "Ø¨Ø±Ø¬Ø± Ù„Ø­Ù… (Ø¨Ø¯ÙˆÙ† Ø®Ø¨Ø²)", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 250, p: 26, c: 0, f: 17, icon: "ğŸ”" },
  { id: "f89", name: "Ø¨Ø±Ø¬Ø± Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 350, p: 28, c: 30, f: 12, icon: "ğŸ”" },
  { id: "f90", name: "Ù…Ø¹ØµÙˆØ¨", cat: "ÙˆØ¬Ø¨Ø§Øª", cal: 380, p: 8, c: 55, f: 15, icon: "ğŸ¯" },
];

const FOOD_CATEGORIES = ["Ø§Ù„ÙƒÙ„", "Ø¨Ø±ÙˆØªÙŠÙ†", "ÙƒØ§Ø±Ø¨", "Ø¯Ù‡ÙˆÙ†", "Ø§Ù„Ø¨Ø§Ù†", "Ù…ÙƒÙ…Ù„Ø§Øª", "Ø®Ø¶Ø±ÙˆØ§Øª", "ÙˆØ¬Ø¨Ø§Øª"];

// ===== UTILITY =====
function generateId() { return Date.now().toString(36) + Math.random().toString(36).substr(2, 5); }

function formatTime(seconds) {
  const m = Math.floor(seconds / 60);
  const s = seconds % 60;
  return `${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
}

// ===== STYLES =====
const CSS = `
@import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800;900&family=Bebas+Neue&display=swap');

:root {
  --bg-primary: #0A0A0F;
  --bg-secondary: #12121A;
  --bg-card: #1A1A2E;
  --bg-card-hover: #22223A;
  --bg-input: #16162A;
  --accent: #FF3E3E;
  --accent-glow: rgba(255,62,62,0.3);
  --accent2: #FF8C00;
  --accent3: #00D4FF;
  --text: #EEEEF0;
  --text-dim: #8888AA;
  --text-muted: #555570;
  --border: #2A2A40;
  --success: #00DD66;
  --warning: #FFaa00;
  --danger: #FF3E3E;
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 8px 32px rgba(0,0,0,0.5);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

body, #root {
  font-family: 'Tajawal', sans-serif;
  background: var(--bg-primary);
  color: var(--text);
  direction: rtl;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Scrollbar */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: var(--bg-primary); }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* Background Pattern */
.app-bg {
  position: fixed;
  inset: 0;
  background: 
    radial-gradient(ellipse at 20% 0%, rgba(255,62,62,0.08) 0%, transparent 50%),
    radial-gradient(ellipse at 80% 100%, rgba(0,212,255,0.06) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 50%, rgba(255,140,0,0.04) 0%, transparent 60%);
  pointer-events: none;
  z-index: 0;
}

.app-container {
  position: relative;
  z-index: 1;
  max-width: 480px;
  margin: 0 auto;
  min-height: 100vh;
  padding-bottom: 90px;
}

/* Header */
.header {
  padding: 20px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.header::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -20%;
  width: 140%;
  height: 200%;
  background: linear-gradient(135deg, rgba(255,62,62,0.1) 0%, transparent 40%, rgba(0,212,255,0.05) 100%);
  pointer-events: none;
}

.logo-title {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 42px;
  letter-spacing: 4px;
  background: linear-gradient(135deg, #FF3E3E, #FF8C00, #FF3E3E);
  background-size: 200% 200%;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradShift 3s ease infinite;
  position: relative;
  text-shadow: 0 0 40px rgba(255,62,62,0.3);
}

@keyframes gradShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.logo-sub {
  color: var(--text-dim);
  font-size: 13px;
  margin-top: 4px;
  letter-spacing: 2px;
}

/* Navigation */
.nav-bar {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 100%;
  max-width: 480px;
  background: linear-gradient(to top, rgba(10,10,15,0.98), rgba(10,10,15,0.92));
  backdrop-filter: blur(20px);
  border-top: 1px solid var(--border);
  display: flex;
  justify-content: space-around;
  padding: 8px 4px;
  z-index: 100;
}

.nav-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3px;
  padding: 6px 10px;
  border-radius: var(--radius-sm);
  cursor: pointer;
  transition: all 0.3s;
  border: none;
  background: none;
  color: var(--text-muted);
  font-family: 'Tajawal', sans-serif;
  font-size: 10px;
  font-weight: 500;
  min-width: 56px;
}

.nav-item.active {
  color: var(--accent);
  background: rgba(255,62,62,0.1);
}

.nav-item .nav-icon { font-size: 22px; }

/* Cards */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 18px;
  margin: 10px 16px;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent), var(--accent2), var(--accent3));
  opacity: 0;
  transition: opacity 0.3s;
}

.card:hover::before { opacity: 1; }

.card-glow {
  box-shadow: 0 0 30px rgba(255,62,62,0.1), var(--shadow);
}

/* Section Title */
.section-title {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 20px 16px 8px;
  font-size: 18px;
  font-weight: 800;
  color: var(--text);
}

.section-title .icon {
  width: 36px; height: 36px;
  display: flex; align-items: center; justify-content: center;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  border-radius: 10px;
  font-size: 18px;
}

/* Buttons */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 12px 24px;
  border-radius: var(--radius-sm);
  font-family: 'Tajawal', sans-serif;
  font-weight: 700;
  font-size: 15px;
  cursor: pointer;
  transition: all 0.3s;
  border: none;
  position: relative;
  overflow: hidden;
}

.btn-primary {
  background: linear-gradient(135deg, #FF3E3E, #CC2200);
  color: white;
  box-shadow: 0 4px 20px rgba(255,62,62,0.3);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 30px rgba(255,62,62,0.4);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text);
  border: 1px solid var(--border);
}

.btn-danger {
  background: linear-gradient(135deg, #cc0000, #880000);
  color: white;
}

.btn-sm { padding: 8px 16px; font-size: 13px; }

.btn-full { width: 100%; }

/* Inputs */
.input {
  width: 100%;
  padding: 12px 16px;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text);
  font-family: 'Tajawal', sans-serif;
  font-size: 15px;
  transition: all 0.3s;
  direction: rtl;
}

.input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-glow);
}

.input-row {
  display: flex;
  gap: 8px;
  align-items: center;
}

.input-label {
  font-size: 13px;
  color: var(--text-dim);
  margin-bottom: 6px;
  font-weight: 600;
}

/* Progress Bars */
.progress-bar {
  width: 100%;
  height: 10px;
  background: var(--bg-input);
  border-radius: 5px;
  overflow: hidden;
  position: relative;
}

.progress-fill {
  height: 100%;
  border-radius: 5px;
  transition: width 0.5s ease;
  position: relative;
}

.progress-fill::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  animation: shimmer 2s infinite;
}

@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

/* Stat Boxes */
.stat-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin: 10px 16px;
}

.stat-box {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 14px;
  text-align: center;
  position: relative;
  overflow: hidden;
}

.stat-box .stat-val {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 32px;
  letter-spacing: 1px;
}

.stat-box .stat-label {
  font-size: 12px;
  color: var(--text-dim);
  margin-top: 2px;
}

/* Muscle Card */
.muscle-card {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 14px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  margin: 6px 16px;
  cursor: pointer;
  transition: all 0.3s;
}

.muscle-card:hover {
  border-color: var(--accent);
  background: var(--bg-card-hover);
  transform: translateX(-4px);
}

.muscle-icon {
  width: 44px; height: 44px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 12px;
  font-size: 22px;
  flex-shrink: 0;
}

.muscle-info { flex: 1; }
.muscle-name { font-weight: 700; font-size: 16px; }
.muscle-count { font-size: 12px; color: var(--text-dim); }

/* Exercise Row */
.exercise-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--bg-input);
  border-radius: var(--radius-sm);
  margin-bottom: 8px;
  border: 1px solid transparent;
  transition: all 0.2s;
}

.exercise-row:hover { border-color: var(--border); }

.exercise-check {
  width: 24px; height: 24px;
  border-radius: 6px;
  border: 2px solid var(--border);
  display: flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  flex-shrink: 0;
}

.exercise-check.checked {
  background: var(--accent);
  border-color: var(--accent);
}

.exercise-name { flex: 1; font-weight: 600; font-size: 14px; }
.exercise-type {
  font-size: 11px;
  padding: 3px 8px;
  background: rgba(255,255,255,0.05);
  border-radius: 6px;
  color: var(--text-dim);
}

/* Set Logger */
.set-row {
  display: grid;
  grid-template-columns: 40px 1fr 1fr 60px;
  gap: 8px;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid rgba(255,255,255,0.03);
}

.set-num {
  width: 30px; height: 30px;
  display: flex; align-items: center; justify-content: center;
  background: var(--bg-input);
  border-radius: 8px;
  font-weight: 700;
  font-size: 13px;
  color: var(--text-dim);
}

.set-num.done { background: var(--accent); color: white; }

.set-input {
  padding: 8px;
  background: var(--bg-input);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  font-family: 'Tajawal', sans-serif;
  font-size: 14px;
  text-align: center;
  width: 100%;
}

.set-input:focus { outline: none; border-color: var(--accent); }

.set-done-btn {
  padding: 8px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg-input);
  color: var(--text-dim);
  cursor: pointer;
  font-size: 16px;
  transition: all 0.2s;
}

.set-done-btn.completed {
  background: var(--success);
  border-color: var(--success);
  color: white;
}

/* Timer */
.timer-display {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 72px;
  text-align: center;
  letter-spacing: 4px;
  color: var(--text);
  text-shadow: 0 0 30px var(--accent-glow);
}

.timer-controls {
  display: flex; justify-content: center; gap: 12px; margin-top: 16px;
}

/* Nutrition */
.macro-bar {
  margin: 8px 0;
}

.macro-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 4px;
  font-size: 13px;
}

.macro-name { font-weight: 700; }
.macro-val { color: var(--text-dim); }

/* Meal Entry */
.meal-entry {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px;
  background: var(--bg-input);
  border-radius: var(--radius-sm);
  margin-bottom: 6px;
}

.meal-entry .meal-name { flex: 1; font-weight: 600; font-size: 14px; }
.meal-entry .meal-cals { font-size: 13px; color: var(--accent2); font-weight: 700; }

.delete-btn {
  width: 28px; height: 28px;
  display: flex; align-items: center; justify-content: center;
  background: rgba(255,0,0,0.1);
  border: none;
  border-radius: 6px;
  color: var(--danger);
  cursor: pointer;
  font-size: 14px;
  transition: all 0.2s;
}

.delete-btn:hover { background: rgba(255,0,0,0.2); }

/* Body Stats */
.measurement-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid rgba(255,255,255,0.03);
}

/* Modal/Overlay */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(8px);
  z-index: 200;
  display: flex;
  align-items: flex-end;
  justify-content: center;
}

.modal-content {
  background: var(--bg-secondary);
  border: 1px solid var(--border);
  border-radius: 24px 24px 0 0;
  width: 100%;
  max-width: 480px;
  max-height: 85vh;
  overflow-y: auto;
  padding: 24px;
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from { transform: translateY(100%); }
  to { transform: translateY(0); }
}

.modal-handle {
  width: 40px; height: 4px;
  background: var(--border);
  border-radius: 2px;
  margin: 0 auto 20px;
}

/* RPE Selector */
.rpe-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  gap: 6px;
}

.rpe-btn {
  padding: 8px 4px;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--bg-input);
  color: var(--text-dim);
  font-family: 'Tajawal', sans-serif;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s;
  font-size: 14px;
}

.rpe-btn.selected {
  border-color: var(--accent);
  background: rgba(255,62,62,0.15);
  color: var(--accent);
}

/* Tags */
.tag {
  display: inline-block;
  padding: 4px 10px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
}

/* Select */
select.input {
  appearance: none;
  cursor: pointer;
}

/* Fade In Animation */
.fade-in {
  animation: fadeIn 0.4s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* Streak */
.streak-fire {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 14px;
  background: linear-gradient(135deg, rgba(255,140,0,0.15), rgba(255,62,62,0.15));
  border: 1px solid rgba(255,140,0,0.3);
  border-radius: 20px;
  font-size: 14px;
  font-weight: 700;
  color: var(--accent2);
}

/* Tabs */
.tabs {
  display: flex;
  gap: 4px;
  margin: 10px 16px;
  background: var(--bg-card);
  border-radius: var(--radius-sm);
  padding: 4px;
}

.tab {
  flex: 1;
  padding: 10px;
  border-radius: 8px;
  border: none;
  background: transparent;
  color: var(--text-dim);
  font-family: 'Tajawal', sans-serif;
  font-weight: 700;
  font-size: 13px;
  cursor: pointer;
  transition: all 0.2s;
}

.tab.active {
  background: var(--accent);
  color: white;
}

/* Badge */
.badge {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 8px 14px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  font-size: 13px;
  margin: 4px;
}

.badge .badge-icon { font-size: 18px; }

.water-drop {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
  justify-content: center;
  padding: 12px;
}

.drop {
  width: 36px; height: 36px;
  border-radius: 50% 50% 50% 0;
  transform: rotate(-45deg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.3s;
  border: 2px solid var(--border);
  background: var(--bg-input);
}

.drop.filled {
  background: linear-gradient(135deg, #0088FF, #00CCFF);
  border-color: #00AAFF;
}

.drop span { transform: rotate(45deg); }

/* Workout Timer Big */
.workout-timer-bar {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  padding: 10px 16px;
  margin: 0 16px;
  background: linear-gradient(90deg, rgba(255,62,62,0.1), rgba(255,140,0,0.1));
  border: 1px solid rgba(255,62,62,0.2);
  border-radius: var(--radius-sm);
  font-family: 'Bebas Neue', sans-serif;
  font-size: 24px;
  letter-spacing: 2px;
  color: var(--accent);
}

/* Chart */
.mini-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 60px;
  padding: 8px 0;
}

.chart-bar {
  flex: 1;
  border-radius: 3px 3px 0 0;
  transition: height 0.5s ease;
  min-width: 8px;
}

/* Calendar */
.cal-grid {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 4px;
  margin: 8px 16px;
}

.cal-day {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 700;
  position: relative;
  border: 1px solid var(--border);
  background: var(--bg-input);
  transition: all 0.2s;
}

.cal-day.workout {
  background: linear-gradient(135deg, rgba(255,62,62,0.2), rgba(255,140,0,0.2));
  border-color: rgba(255,62,62,0.4);
  color: var(--accent);
}

.cal-day.today {
  border-color: var(--accent3);
  box-shadow: 0 0 10px rgba(0,212,255,0.3);
}

.cal-day.rest {
  background: var(--bg-input);
  color: var(--text-muted);
}

.cal-day .cal-dot {
  width: 6px; height: 6px;
  border-radius: 50%;
  margin-top: 2px;
}

/* Level Bar */
.level-bar {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 12px 16px;
  margin: 8px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.level-icon {
  font-size: 28px;
  width: 44px; height: 44px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 12px;
}

.level-info { flex: 1; }

/* Active Workout Mode */
.active-mode {
  position: fixed;
  inset: 0;
  z-index: 150;
  background: var(--bg-primary);
  display: flex;
  flex-direction: column;
  overflow-y: auto;
}

.active-header {
  padding: 20px;
  text-align: center;
  background: linear-gradient(180deg, rgba(255,62,62,0.1), transparent);
}

.active-timer {
  font-family: 'Bebas Neue', sans-serif;
  font-size: 56px;
  color: var(--accent);
  letter-spacing: 3px;
  text-shadow: 0 0 30px rgba(255,62,62,0.4);
}

.active-quote {
  font-size: 14px;
  color: var(--accent2);
  font-weight: 700;
  margin-top: 6px;
  animation: pulse 2s ease infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.active-exercise-card {
  margin: 12px 20px;
  padding: 20px;
  background: var(--bg-card);
  border: 2px solid var(--accent);
  border-radius: var(--radius);
  text-align: center;
  box-shadow: 0 0 30px rgba(255,62,62,0.15);
}

.active-exercise-name {
  font-size: 22px;
  font-weight: 900;
  color: var(--text);
  margin-bottom: 4px;
}

.active-exercise-detail {
  font-size: 14px;
  color: var(--text-dim);
}

.active-progress {
  display: flex;
  gap: 6px;
  justify-content: center;
  margin: 12px 20px;
  flex-wrap: wrap;
}

.active-dot {
  width: 12px; height: 12px;
  border-radius: 50%;
  border: 2px solid var(--border);
  transition: all 0.3s;
}

.active-dot.done {
  background: var(--accent);
  border-color: var(--accent);
  box-shadow: 0 0 8px rgba(255,62,62,0.5);
}

.active-dot.current {
  border-color: var(--accent3);
  box-shadow: 0 0 8px rgba(0,212,255,0.5);
  animation: pulse 1s ease infinite;
}

/* Chart bars */
.chart-container {
  padding: 16px;
  margin: 8px 16px;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.chart-bars {
  display: flex;
  align-items: flex-end;
  gap: 6px;
  height: 120px;
  padding-top: 8px;
}

.chart-col {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.chart-bar-v {
  width: 100%;
  border-radius: 4px 4px 0 0;
  transition: height 0.6s ease;
  min-height: 4px;
}

.chart-label {
  font-size: 9px;
  color: var(--text-muted);
  text-align: center;
}

.chart-val {
  font-size: 10px;
  font-weight: 700;
  color: var(--text-dim);
}

/* AI Card */
.ai-card {
  margin: 8px 16px;
  padding: 16px;
  background: linear-gradient(135deg, rgba(0,212,255,0.05), rgba(255,62,62,0.05));
  border: 1px solid rgba(0,212,255,0.2);
  border-radius: var(--radius);
  position: relative;
  overflow: hidden;
}

.ai-card::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--accent3), var(--accent), var(--accent2));
}
`;

// ===== COMPONENTS =====

// Rest Timer Component
function RestTimer({ onClose }) {
  const [time, setTime] = useState(90);
  const [isRunning, setIsRunning] = useState(false);
  const [customTime, setCustomTime] = useState(90);
  const intervalRef = useRef(null);

  useEffect(() => {
    if (isRunning && time > 0) {
      intervalRef.current = setInterval(() => setTime(t => t - 1), 1000);
    } else if (time === 0) {
      setIsRunning(false);
    }
    return () => clearInterval(intervalRef.current);
  }, [isRunning, time]);

  const presets = [30, 60, 90, 120, 180];

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={e => e.stopPropagation()}>
        <div className="modal-handle" />
        <h3 style={{ textAlign: "center", marginBottom: 24, fontSize: 20, fontWeight: 800 }}>â±ï¸ Ù…Ø¤Ù‚Øª Ø§Ù„Ø±Ø§Ø­Ø©</h3>
        <div className="timer-display" style={{ color: time <= 5 && time > 0 ? '#FF3E3E' : 'inherit' }}>
          {formatTime(time)}
        </div>
        <div className="timer-controls">
          {!isRunning ? (
            <button className="btn btn-primary" onClick={() => { setIsRunning(true); }}>â–¶ Ø§Ø¨Ø¯Ø£</button>
          ) : (
            <button className="btn btn-secondary" onClick={() => setIsRunning(false)}>â¸ ÙˆÙ‚Ù</button>
          )}
          <button className="btn btn-secondary" onClick={() => { setIsRunning(false); setTime(customTime); }}>â†º Ø§Ø¹Ø§Ø¯Ø©</button>
        </div>
        <div style={{ display: "flex", gap: 8, justifyContent: "center", marginTop: 20, flexWrap: "wrap" }}>
          {presets.map(p => (
            <button key={p} className={`btn btn-sm ${customTime === p ? 'btn-primary' : 'btn-secondary'}`}
              onClick={() => { setCustomTime(p); setTime(p); setIsRunning(false); }}>
              {p}Ø«
            </button>
          ))}
        </div>
      </div>
    </div>
  );
}

// Set Logger Component
function SetLogger({ exercise, onSave, onClose }) {
  const defaultSets = Array.from({ length: exercise.sets }, (_, i) => ({
    num: i + 1, weight: "", reps: "", done: false
  }));
  const [sets, setSets] = useState(defaultSets);
  const [rpe, setRpe] = useState(null);
  const [notes, setNotes] = useState("");
  const [showTimer, setShowTimer] = useState(false);

  const toggleSet = (idx) => {
    const updated = [...sets];
    updated[idx].done = !updated[idx].done;
    setSets(updated);
    if (updated[idx].done) setShowTimer(true);
  };

  const updateSet = (idx, field, val) => {
    const updated = [...sets];
    updated[idx][field] = val;
    setSets(updated);
  };

  const addSet = () => {
    setSets([...sets, { num: sets.length + 1, weight: "", reps: "", done: false }]);
  };

  const completedSets = sets.filter(s => s.done).length;
  const totalVolume = sets.filter(s => s.done).reduce((acc, s) => acc + (Number(s.weight) || 0) * (Number(s.reps) || 0), 0);

  return (
    <div className="modal-overlay" onClick={onClose}>
      <div className="modal-content" onClick={e => e.stopPropagation()}>
        <div className="modal-handle" />
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 16 }}>
          <h3 style={{ fontSize: 18, fontWeight: 800 }}>{exercise.name}</h3>
          <div style={{ display: "flex", gap: 8, alignItems: "center" }}>
            <span className="tag" style={{ background: "rgba(255,62,62,0.1)", color: "#FF3E3E" }}>{exercise.type}</span>
            <button className="btn btn-secondary btn-sm" style={{ padding: "6px 12px", fontSize: 16 }} onClick={onClose}>âœ•</button>
          </div>
        </div>

        <div style={{ display: "flex", gap: 12, marginBottom: 16 }}>
          <div className="stat-box" style={{ flex: 1, padding: 10 }}>
            <div className="stat-val" style={{ fontSize: 22, color: "#00DD66" }}>{completedSets}/{sets.length}</div>
            <div className="stat-label">Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
          </div>
          <div className="stat-box" style={{ flex: 1, padding: 10 }}>
            <div className="stat-val" style={{ fontSize: 22, color: "#FF8C00" }}>{totalVolume}</div>
            <div className="stat-label">Ø­Ø¬Ù… ÙƒÙ„ÙŠ</div>
          </div>
        </div>

        <div className="set-row" style={{ fontWeight: 700, color: "var(--text-dim)", fontSize: 12 }}>
          <span style={{ textAlign: "center" }}>#</span>
          <span style={{ textAlign: "center" }}>Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)</span>
          <span style={{ textAlign: "center" }}>Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª</span>
          <span style={{ textAlign: "center" }}>âœ“</span>
        </div>

        {sets.map((s, i) => (
          <div className="set-row" key={i}>
            <div className={`set-num ${s.done ? 'done' : ''}`}>{s.num}</div>
            <input className="set-input" type="number" placeholder="0" value={s.weight}
              onChange={e => updateSet(i, "weight", e.target.value)} />
            <input className="set-input" type="number" placeholder={exercise.reps} value={s.reps}
              onChange={e => updateSet(i, "reps", e.target.value)} />
            <button className={`set-done-btn ${s.done ? 'completed' : ''}`} onClick={() => toggleSet(i)}>
              {s.done ? "âœ“" : "â—‹"}
            </button>
          </div>
        ))}

        <button className="btn btn-secondary btn-sm btn-full" style={{ marginTop: 8 }} onClick={addSet}>
          + Ø§Ø¶Ø§ÙØ© Ù…Ø¬Ù…ÙˆØ¹Ø©
        </button>

        <div style={{ marginTop: 16 }}>
          <div className="input-label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØµØ¹ÙˆØ¨Ø© (RPE)</div>
          <div className="rpe-grid">
            {[6, 7, 8, 9, 10].map(r => (
              <button key={r} className={`rpe-btn ${rpe === r ? 'selected' : ''}`} onClick={() => setRpe(r)}>
                {r}
              </button>
            ))}
          </div>
        </div>

        <div style={{ marginTop: 12 }}>
          <div className="input-label">Ù…Ù„Ø§Ø­Ø¸Ø§Øª</div>
          <input className="input" placeholder="Ù…Ø«Ø§Ù„: Ø´Ø¹Ø±Øª Ø¨Ø£Ù„Ù… ÙÙŠ Ø§Ù„ÙƒØªÙ..." value={notes} onChange={e => setNotes(e.target.value)} />
        </div>

        <div style={{ display: "flex", gap: 8, marginTop: 20 }}>
          <button className="btn btn-primary" style={{ flex: 2 }} onClick={() => onSave({ sets, rpe, notes, exercise })}>
            ğŸ’¾ Ø­ÙØ¸
          </button>
          <button className="btn btn-secondary" style={{ flex: 1 }} onClick={onClose}>
            â†’ Ø±Ø¬ÙˆØ¹
          </button>
        </div>

        {showTimer && <RestTimer onClose={() => setShowTimer(false)} />}
      </div>
    </div>
  );
}

// ===== MAIN APP =====
function GymBeastApp() {
  // Navigation
  const [page, setPage] = useState("home");

  // Workout state
  const [workoutActive, setWorkoutActive] = useState(false);
  const [workoutTime, setWorkoutTime] = useState(0);
  const [selectedMuscle, setSelectedMuscle] = useState(null);
  const [selectedExercise, setSelectedExercise] = useState(null);
  const [workoutLog, setWorkoutLog] = useState([]);
  const [showTimer, setShowTimer] = useState(false);

  // Nutrition state
  const [userProfile, setUserProfile] = useState({
    weight: 80, height: 175, age: 25, gender: "male", activity: "moderate", goal: "maintain"
  });
  const [meals, setMeals] = useState([]);
  const [mealForm, setMealForm] = useState({ name: "", calories: "", protein: "", carbs: "", fat: "" });
  const [waterCount, setWaterCount] = useState(0);
  const [foodSearch, setFoodSearch] = useState("");
  const [foodCat, setFoodCat] = useState("Ø§Ù„ÙƒÙ„");
  const [showFoodPicker, setShowFoodPicker] = useState(false);
  const [foodGrams, setFoodGrams] = useState(100);

  // Body state
  const [bodyWeight, setBodyWeight] = useState([]);
  const [measurements, setMeasurements] = useState({ chest: "", waist: "", arm: "", thigh: "", shoulder: "" });
  const [newWeightInput, setNewWeightInput] = useState("");

  // Tab states
  const [nutritionTab, setNutritionTab] = useState("meals");
  const [bodyTab, setBodyTab] = useState("weight");
  const [selectedProgram, setSelectedProgram] = useState(null);

  // Gamification
  const [streak, setStreak] = useState(7);
  const [totalWorkouts, setTotalWorkouts] = useState(42);
  const [xp, setXp] = useState(2150);

  // Calendar & History
  const [workoutHistory, setWorkoutHistory] = useState(() => {
    const h = {};
    const today = new Date();
    for (let i = 1; i <= 7; i++) {
      const d = new Date(today);
      d.setDate(d.getDate() - i);
      if (i !== 3 && i !== 7) {
        h[d.toISOString().split('T')[0]] = { muscles: ["ØµØ¯Ø±", "Ø¸Ù‡Ø±"].slice(0, i % 2 + 1), duration: 40 + i * 5, exercises: i + 2 };
      }
    }
    return h;
  });

  // Active Workout Mode
  const [activeMode, setActiveMode] = useState(false);
  const [currentExIndex, setCurrentExIndex] = useState(0);

  // Motivational quotes
  const QUOTES = [
    "ğŸ’€ Ø§Ù„Ø£Ù„Ù… Ù…Ø¤Ù‚Øª.. Ø§Ù„Ù…Ø¬Ø¯ Ø¯Ø§Ø¦Ù…!",
    "ğŸ”¥ Ù…Ø§ ÙÙŠ ÙˆÙ‚Øª Ù„Ù„Ø±Ø§Ø­Ø© ÙŠØ§ ÙˆØ­Ø´!",
    "âš¡ ÙƒÙ„ ØªÙƒØ±Ø§Ø± ÙŠÙ‚Ø±Ø¨Ùƒ Ù…Ù† Ù‡Ø¯ÙÙƒ!",
    "ğŸ’ª Ø§Ù„Ø­Ø¯ÙŠØ¯ Ù…Ø§ ÙŠØ±Ø­Ù… Ø§Ù„Ø¶Ø¹ÙŠÙ!",
    "ğŸ† Ø§Ù†Øª Ù‡Ù†Ø§ Ø¹Ø´Ø§Ù† ØªÙƒÙˆÙ† Ø§Ù„Ø£ÙØ¶Ù„!",
    "ğŸ¯ Ø±ÙƒØ².. Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ ÙŠØ¨Ø¯Ø£ Ù„Ù…Ø§ ØªØªØ¹Ø¨!",
    "ğŸ¦ ÙƒÙ† ÙˆØ­Ø´ Ø§Ù„ØªÙ…Ø±ÙŠÙ†!",
    "â­ Ø§Ù„ÙŠÙˆÙ… Ø£Ù‚ÙˆÙ‰ Ù…Ù† Ø£Ù…Ø³!",
  ];

  // Workout timer
  const timerRef = useRef(null);
  useEffect(() => {
    if (workoutActive) {
      timerRef.current = setInterval(() => setWorkoutTime(t => t + 1), 1000);
    }
    return () => clearInterval(timerRef.current);
  }, [workoutActive]);

  // Nutrition Calculations
  const calcBMR = useMemo(() => {
    const { weight, height, age, gender } = userProfile;
    if (gender === "male") return 10 * weight + 6.25 * height - 5 * age + 5;
    return 10 * weight + 6.25 * height - 5 * age - 161;
  }, [userProfile]);

  const activityMultipliers = { sedentary: 1.2, light: 1.375, moderate: 1.55, active: 1.725, very_active: 1.9 };
  const goalAdjust = { cut: -500, maintain: 0, bulk: 400 };

  const tdee = useMemo(() => Math.round(calcBMR * (activityMultipliers[userProfile.activity] || 1.55)), [calcBMR, userProfile.activity]);
  const targetCalories = useMemo(() => tdee + (goalAdjust[userProfile.goal] || 0), [tdee, userProfile.goal]);

  const macroTargets = useMemo(() => {
    const proteinG = Math.round(userProfile.weight * 2);
    const fatG = Math.round(userProfile.weight * 1);
    const proteinCal = proteinG * 4;
    const fatCal = fatG * 9;
    const carbsCal = targetCalories - proteinCal - fatCal;
    const carbsG = Math.round(Math.max(0, carbsCal / 4));
    return { protein: proteinG, carbs: carbsG, fat: fatG };
  }, [userProfile.weight, targetCalories]);

  const consumedMacros = useMemo(() => {
    return meals.reduce((acc, m) => ({
      calories: acc.calories + (Number(m.calories) || 0),
      protein: acc.protein + (Number(m.protein) || 0),
      carbs: acc.carbs + (Number(m.carbs) || 0),
      fat: acc.fat + (Number(m.fat) || 0),
    }), { calories: 0, protein: 0, carbs: 0, fat: 0 });
  }, [meals]);

  const waterTarget = Math.round(userProfile.weight * 0.035 * 4); // glasses (250ml each)

  const addMeal = () => {
    if (!mealForm.name) return;
    const p = Number(mealForm.protein) || 0;
    const c = Number(mealForm.carbs) || 0;
    const f = Number(mealForm.fat) || 0;
    const autoCal = p * 4 + c * 4 + f * 9;
    const finalCal = mealForm.calories ? Number(mealForm.calories) : autoCal;
    setMeals([...meals, { ...mealForm, calories: finalCal, protein: p, carbs: c, fat: f, id: generateId() }]);
    setMealForm({ name: "", calories: "", protein: "", carbs: "", fat: "" });
  };

  const addFoodFromDB = (food, grams) => {
    const ratio = grams / 100;
    const cal = Math.round(food.cal * ratio);
    const p = Math.round(food.p * ratio * 10) / 10;
    const c = Math.round(food.c * ratio * 10) / 10;
    const f = Math.round(food.f * ratio * 10) / 10;
    setMeals([...meals, { name: `${food.name} (${grams}g)`, calories: cal, protein: p, carbs: c, fat: f, id: generateId() }]);
    setShowFoodPicker(false);
    setFoodGrams(100);
    setFoodSearch("");
  };

  const getSuggestions = useMemo(() => {
    const remP = macroTargets.protein - consumedMacros.protein;
    const remC = macroTargets.carbs - consumedMacros.carbs;
    const remF = macroTargets.fat - consumedMacros.fat;
    const suggestions = [];
    if (remP > 20) {
      const proFoods = FOOD_DB.filter(f => f.p >= 15 && f.cat === "Ø¨Ø±ÙˆØªÙŠÙ†");
      proFoods.slice(0, 3).forEach(f => {
        const grams = Math.round(Math.min(250, (remP / f.p) * 100));
        suggestions.push({ food: f, grams, reason: `ÙŠØºØ·ÙŠ ${Math.round(f.p * grams / 100)}g Ø¨Ø±ÙˆØªÙŠÙ†` });
      });
    }
    if (remC > 30) {
      const carbFoods = FOOD_DB.filter(f => f.c >= 15 && f.cat === "ÙƒØ§Ø±Ø¨");
      carbFoods.slice(0, 2).forEach(f => {
        const grams = Math.round(Math.min(300, (remC / f.c) * 100));
        suggestions.push({ food: f, grams, reason: `ÙŠØºØ·ÙŠ ${Math.round(f.c * grams / 100)}g ÙƒØ§Ø±Ø¨` });
      });
    }
    if (remF > 10) {
      const fatFoods = FOOD_DB.filter(f => f.f >= 10 && f.cat === "Ø¯Ù‡ÙˆÙ†");
      fatFoods.slice(0, 1).forEach(f => {
        const grams = Math.round(Math.min(50, (remF / f.f) * 100));
        suggestions.push({ food: f, grams, reason: `ÙŠØºØ·ÙŠ ${Math.round(f.f * grams / 100)}g Ø¯Ù‡ÙˆÙ†` });
      });
    }
    return suggestions;
  }, [macroTargets, consumedMacros]);

  const deleteMeal = (id) => {
    setMeals(meals.filter(m => m.id !== id));
  };

  const resetDayMeals = () => {
    setMeals([]);
    setWaterCount(0);
  };

  const saveExerciseLog = (data) => {
    setWorkoutLog([...workoutLog, { ...data, timestamp: Date.now() }]);
    setSelectedExercise(null);
  };

  const endWorkout = () => {
    const today = new Date().toISOString().split('T')[0];
    const musclesWorked = [...new Set(workoutLog.map(l => {
      for (const [k, v] of Object.entries(EXERCISES_DB)) {
        if (v.exercises.find(e => e.id === l.exercise.id)) return v.name;
      }
      return "Ø£Ø®Ø±Ù‰";
    }))];
    setWorkoutHistory(prev => ({
      ...prev,
      [today]: { muscles: musclesWorked, duration: Math.round(workoutTime / 60), exercises: workoutLog.length }
    }));
    setWorkoutActive(false);
    setWorkoutTime(0);
    setTotalWorkouts(t => t + 1);
    setStreak(s => s + 1);
    setXp(x => x + workoutLog.length * 50 + 100);
    setActiveMode(false);
    setCurrentExIndex(0);
    setWorkoutLog([]);
    setSelectedMuscle(null);
  };

  // AI Smart Suggestion
  const getAISuggestion = useMemo(() => {
    const today = new Date();
    const recentMuscles = {};
    for (let i = 1; i <= 5; i++) {
      const d = new Date(today);
      d.setDate(d.getDate() - i);
      const key = d.toISOString().split('T')[0];
      if (workoutHistory[key]) {
        workoutHistory[key].muscles.forEach(m => {
          recentMuscles[m] = (recentMuscles[m] || 0) + (6 - i);
        });
      }
    }
    const allMuscles = Object.values(EXERCISES_DB).map(m => m.name);
    const scored = allMuscles.map(m => ({ name: m, score: recentMuscles[m] || 0 }));
    scored.sort((a, b) => a.score - b.score);
    const suggested = scored.slice(0, 3).map(s => s.name);
    const restDays = Object.keys(workoutHistory).length === 0 ? 99 :
      Math.floor((today - new Date(Object.keys(workoutHistory).sort().pop())) / 86400000);
    const needsRest = restDays === 0 || (streak >= 5 && restDays <= 0);
    return { suggested, needsRest, restDays };
  }, [workoutHistory, streak]);

  // XP Level System
  const getLevel = (xp) => {
    if (xp < 500) return { name: "Ù…Ø¨ØªØ¯Ø¦", icon: "ğŸŒ±", next: 500, color: "#44DD44" };
    if (xp < 1500) return { name: "Ù…ØªÙˆØ³Ø·", icon: "ğŸ’ª", next: 1500, color: "#00D4FF" };
    if (xp < 3000) return { name: "Ù…ØªÙ‚Ø¯Ù…", icon: "âš¡", next: 3000, color: "#FF8C00" };
    if (xp < 5000) return { name: "Ù…Ø­ØªØ±Ù", icon: "ğŸ”¥", next: 5000, color: "#FF3E3E" };
    return { name: "ÙˆØ­Ø´", icon: "ğŸ’€", next: 10000, color: "#DD44DD" };
  };
  const level = getLevel(xp);

  // ===== RENDER PAGES =====

  // HOME PAGE
  const renderHome = () => {
    const today = new Date();
    const todayStr = today.toISOString().split('T')[0];
    const calDays = [];
    const startOfWeek = new Date(today);
    startOfWeek.setDate(today.getDate() - today.getDay());
    for (let w = -1; w <= 2; w++) {
      for (let d = 0; d < 7; d++) {
        const date = new Date(startOfWeek);
        date.setDate(startOfWeek.getDate() + w * 7 + d);
        const key = date.toISOString().split('T')[0];
        calDays.push({ date, key, isToday: key === todayStr, hasWorkout: !!workoutHistory[key], data: workoutHistory[key] });
      }
    }

    const weekChart = [];
    for (let i = 6; i >= 0; i--) {
      const d = new Date(today);
      d.setDate(d.getDate() - i);
      const key = d.toISOString().split('T')[0];
      weekChart.push({ day: WEEK_DAYS[d.getDay()], data: workoutHistory[key] });
    }

    const quote = QUOTES[Math.floor(Date.now() / 60000) % QUOTES.length];

    return (
    <div className="fade-in">
      {/* Level Bar */}
      <div className="level-bar">
        <div className="level-icon" style={{ background: `${level.color}20`, border: `1px solid ${level.color}40` }}>
          {level.icon}
        </div>
        <div className="level-info">
          <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
            <span style={{ fontWeight: 800, fontSize: 15, color: level.color }}>{level.name}</span>
            <span style={{ fontSize: 12, color: "var(--text-dim)" }}>{xp} / {level.next} XP</span>
          </div>
          <div className="progress-bar" style={{ marginTop: 6, height: 6 }}>
            <div className="progress-fill" style={{ width: `${(xp / level.next) * 100}%`, background: `linear-gradient(90deg, ${level.color}, ${level.color}88)` }} />
          </div>
        </div>
      </div>

      {/* Quick Stats */}
      <div style={{ display: "flex", justifyContent: "center", gap: 10, margin: "10px 16px" }}>
        <div className="streak-fire">ğŸ”¥ {streak} ÙŠÙˆÙ… Ù…ØªØªØ§Ù„ÙŠ</div>
        <div className="streak-fire" style={{ background: "linear-gradient(135deg, rgba(0,212,255,0.15), rgba(0,100,255,0.15))", borderColor: "rgba(0,212,255,0.3)", color: "#00D4FF" }}>
          ğŸ‹ï¸ {totalWorkouts} ØªÙ…Ø±ÙŠÙ†
        </div>
      </div>

      {/* AI Smart Assistant */}
      <div className="ai-card">
        <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 10 }}>
          <span style={{ fontSize: 22 }}>ğŸ¤–</span>
          <span style={{ fontWeight: 800, fontSize: 15 }}>Ø§Ù„Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„Ø°ÙƒÙŠ</span>
        </div>
        {getAISuggestion.needsRest ? (
          <div>
            <div style={{ fontSize: 14, color: "#FFaa00", fontWeight: 700, marginBottom: 6 }}>ğŸ˜´ ÙŠÙˆÙ… Ø±Ø§Ø­Ø© Ù…Ù‚ØªØ±Ø­!</div>
            <div style={{ fontSize: 13, color: "var(--text-dim)", lineHeight: 1.7 }}>
              Ù„Ø¹Ø¨Øª {streak} Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ© â€” Ø¬Ø³Ù…Ùƒ ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø§ÙÙŠ Ø¹Ø´Ø§Ù† Ø§Ù„Ø¹Ø¶Ù„Ø§Øª ØªÙ†Ù…Ùˆ. Ø®Ø° ÙŠÙˆÙ… Ø±Ø§Ø­Ø© Ø§Ù„ÙŠÙˆÙ…!
            </div>
          </div>
        ) : (
          <div>
            <div style={{ fontSize: 13, color: "var(--text-dim)", marginBottom: 8, lineHeight: 1.6 }}>
              Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø¢Ø®Ø± ØªÙ…Ø§Ø±ÙŠÙ†ÙƒØŒ Ø§Ù„Ø¹Ø¶Ù„Ø§Øª Ø§Ù„Ù„ÙŠ ØªØ­ØªØ§Ø¬ ØªØ´ØªØºÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ø§Ù„ÙŠÙˆÙ…:
            </div>
            <div style={{ display: "flex", gap: 6, flexWrap: "wrap", marginBottom: 10 }}>
              {getAISuggestion.suggested.map((m, i) => (
                <span key={i} style={{ padding: "6px 14px", background: "rgba(255,62,62,0.1)", border: "1px solid rgba(255,62,62,0.3)", borderRadius: 20, fontSize: 13, fontWeight: 700, color: "var(--accent)" }}>
                  {m}
                </span>
              ))}
            </div>
            <button className="btn btn-primary btn-sm" onClick={() => { setPage("workout"); if (!workoutActive) setWorkoutActive(true); }}>
              ğŸ‹ï¸ ÙŠÙ„Ø§ Ù†Ø¨Ø¯Ø£!
            </button>
          </div>
        )}
      </div>

      {/* Macros Stats */}
      <div className="stat-grid">
        <div className="stat-box card-glow">
          <div className="stat-val" style={{ color: "#FF3E3E" }}>{targetCalories}</div>
          <div className="stat-label">Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©</div>
        </div>
        <div className="stat-box">
          <div className="stat-val" style={{ color: targetCalories - consumedMacros.calories >= 0 ? "#00DD66" : "#FF3E3E" }}>{targetCalories - consumedMacros.calories}</div>
          <div className="stat-label">Ø³Ø¹Ø±Ø§Øª Ù…ØªØ¨Ù‚ÙŠØ©</div>
          <div style={{ fontSize: 11, color: "var(--accent2)", fontWeight: 700, marginTop: 2 }}>
            {targetCalories > 0 ? Math.round((consumedMacros.calories / targetCalories) * 100) : 0}% Ù…ÙƒØªÙ…Ù„
          </div>
        </div>
        <div className="stat-box">
          <div className="stat-val" style={{ color: "#FF8C00" }}>{Math.max(0, macroTargets.protein - consumedMacros.protein)}g</div>
          <div className="stat-label">Ø¨Ø±ÙˆØªÙŠÙ† Ù…ØªØ¨Ù‚ÙŠ</div>
          <div style={{ fontSize: 11, color: "var(--accent2)", fontWeight: 700, marginTop: 2 }}>{macroTargets.protein > 0 ? Math.round((consumedMacros.protein / macroTargets.protein) * 100) : 0}%</div>
        </div>
        <div className="stat-box">
          <div className="stat-val" style={{ color: "#00D4FF" }}>{Math.max(0, macroTargets.carbs - consumedMacros.carbs)}g</div>
          <div className="stat-label">ÙƒØ§Ø±Ø¨ Ù…ØªØ¨Ù‚ÙŠ</div>
          <div style={{ fontSize: 11, color: "var(--accent2)", fontWeight: 700, marginTop: 2 }}>{macroTargets.carbs > 0 ? Math.round((consumedMacros.carbs / macroTargets.carbs) * 100) : 0}%</div>
        </div>
      </div>
      <div className="stat-grid">
        <div className="stat-box">
          <div className="stat-val" style={{ color: "#DD44DD" }}>{Math.max(0, macroTargets.fat - consumedMacros.fat)}g</div>
          <div className="stat-label">Ø¯Ù‡ÙˆÙ† Ù…ØªØ¨Ù‚ÙŠ</div>
          <div style={{ fontSize: 11, color: "var(--accent2)", fontWeight: 700, marginTop: 2 }}>{macroTargets.fat > 0 ? Math.round((consumedMacros.fat / macroTargets.fat) * 100) : 0}%</div>
        </div>
        <div className="stat-box">
          <div className="stat-val" style={{ color: "#00D4FF" }}>{waterCount}/{waterTarget}</div>
          <div className="stat-label">Ø§ÙƒÙˆØ§Ø¨ Ù…Ø§Ø¡</div>
          <div style={{ fontSize: 11, color: "var(--accent2)", fontWeight: 700, marginTop: 2 }}>{waterTarget > 0 ? Math.round((waterCount / waterTarget) * 100) : 0}%</div>
        </div>
      </div>

      {/* Macros Progress */}
      <div className="card" style={{ margin: "8px 16px" }}>
        <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 10 }}>
          <span style={{ fontWeight: 800, fontSize: 15 }}>ğŸ“Š Ù†Ø³Ø¨Ø© ØªÙ‚ÙÙŠÙ„ Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬</span>
          <span style={{ fontSize: 12, color: "var(--text-dim)" }}>{consumedMacros.calories} / {targetCalories} ({targetCalories > 0 ? Math.round((consumedMacros.calories / targetCalories) * 100) : 0}%)</span>
        </div>
        {[
          { name: "Ø¨Ø±ÙˆØªÙŠÙ†", current: consumedMacros.protein, target: macroTargets.protein, color: "#FF3E3E", unit: "Ø¬Ù…" },
          { name: "ÙƒØ§Ø±Ø¨", current: consumedMacros.carbs, target: macroTargets.carbs, color: "#FF8C00", unit: "Ø¬Ù…" },
          { name: "Ø¯Ù‡ÙˆÙ†", current: consumedMacros.fat, target: macroTargets.fat, color: "#00D4FF", unit: "Ø¬Ù…" },
        ].map(m => {
          const pct = m.target > 0 ? Math.round((m.current / m.target) * 100) : 0;
          const remaining = Math.max(0, m.target - m.current);
          return (
          <div className="macro-bar" key={m.name}>
            <div className="macro-header">
              <span className="macro-name">{m.name} <span style={{ fontSize: 11, color: "var(--accent2)" }}>({pct}%)</span></span>
              <span className="macro-val">Ù…ØªØ¨Ù‚ÙŠ {remaining} {m.unit} | {m.current}/{m.target}</span>
            </div>
            <div className="progress-bar">
              <div className="progress-fill" style={{
                width: `${Math.min(100, pct)}%`,
                background: `linear-gradient(90deg, ${m.color}, ${m.color}88)`
              }} />
            </div>
          </div>
          );
        })}
      </div>

      {/* Calendar */}
      <div className="section-title"><div className="icon">ğŸ—“ï¸</div> ØªÙ‚ÙˆÙŠÙ… Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</div>
      <div style={{ padding: "0 16px" }}>
        <div style={{ display: "grid", gridTemplateColumns: "repeat(7, 1fr)", gap: 2, marginBottom: 4, textAlign: "center" }}>
          {WEEK_DAYS.map(d => <div key={d} style={{ fontSize: 10, color: "var(--text-muted)", fontWeight: 600 }}>{d.slice(0, 3)}</div>)}
        </div>
        <div className="cal-grid">
          {calDays.map((cd, i) => (
            <div key={i} className={`cal-day ${cd.hasWorkout ? 'workout' : 'rest'} ${cd.isToday ? 'today' : ''}`}>
              <span style={{ fontSize: 12 }}>{cd.date.getDate()}</span>
              {cd.hasWorkout && <div className="cal-dot" style={{ background: "#FF3E3E" }} />}
              {cd.isToday && !cd.hasWorkout && <div className="cal-dot" style={{ background: "var(--accent3)" }} />}
            </div>
          ))}
        </div>
      </div>

      {/* Weekly Activity Chart */}
      <div className="chart-container">
        <div style={{ fontWeight: 800, marginBottom: 10, fontSize: 14 }}>ğŸ“Š Ù†Ø´Ø§Ø· Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹</div>
        <div className="chart-bars">
          {weekChart.map((d, i) => {
            const h = d.data ? Math.max(15, Math.min(100, d.data.duration * 1.2)) : 8;
            return (
              <div className="chart-col" key={i} style={{ height: "100%" }}>
                <div className="chart-val">{d.data ? `${d.data.duration}Ø¯` : ""}</div>
                <div style={{ flex: 1, display: "flex", alignItems: "flex-end", width: "100%" }}>
                  <div className="chart-bar-v" style={{
                    height: `${h}%`,
                    background: d.data ? "linear-gradient(to top, #FF3E3E, #FF8C00)" : "var(--bg-input)",
                    border: d.data ? "none" : "1px solid var(--border)"
                  }} />
                </div>
                <div className="chart-label">{d.day.slice(0, 3)}</div>
              </div>
            );
          })}
        </div>
      </div>

      {/* Quick Actions */}
      <div style={{ padding: "8px 16px", display: "flex", gap: 8 }}>
        <button className="btn btn-primary btn-full" style={{ flex: 2 }} onClick={() => { setPage("workout"); if (!workoutActive) setWorkoutActive(true); }}>
          ğŸ‹ï¸ Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ…Ø±ÙŠÙ†
        </button>
        <button className="btn btn-secondary" onClick={() => setShowTimer(true)}>â±ï¸</button>
      </div>

      {/* Badges */}
      <div className="section-title"><div className="icon">ğŸ†</div> Ø§Ù„Ø§Ù†Ø¬Ø§Ø²Ø§Øª</div>
      <div style={{ padding: "0 16px", display: "flex", flexWrap: "wrap" }}>
        <div className="badge"><span className="badge-icon">ğŸ’ª</span> Ø§ÙˆÙ„ ØªÙ…Ø±ÙŠÙ†</div>
        <div className="badge"><span className="badge-icon">ğŸ”¥</span> Ø§Ø³Ø¨ÙˆØ¹ ÙƒØ§Ù…Ù„</div>
        <div className="badge"><span className="badge-icon">ğŸ¯</span> Ù‡Ø¯Ù Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ†</div>
        <div className="badge"><span className="badge-icon">ğŸ’§</span> ØªØ±Ø·ÙŠØ¨ Ù…Ø«Ø§Ù„ÙŠ</div>
        <div className="badge"><span className="badge-icon">âš¡</span> PR Ø¬Ø¯ÙŠØ¯!</div>
        <div className="badge"><span className="badge-icon">ğŸ†</span> Ø´Ù‡Ø± ÙƒØ§Ù…Ù„</div>
      </div>

      {showTimer && <RestTimer onClose={() => setShowTimer(false)} />}
    </div>
    );
  };

  // WORKOUT PAGE
  const renderWorkout = () => (
    <div className="fade-in">
      <div style={{ padding: "10px 16px" }}>
        <button className="btn btn-secondary btn-sm" onClick={() => { setPage("home"); setSelectedMuscle(null); }}>
          â†’ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
        </button>
      </div>
      {workoutActive && (
        <div className="workout-timer-bar">
          <span>â±ï¸</span>
          <span>{formatTime(workoutTime)}</span>
          <span style={{ fontSize: 12, color: "var(--text-dim)" }}>Ù…Ø¯Ø© Ø§Ù„ØªÙ…Ø±ÙŠÙ†</span>
        </div>
      )}

      {!selectedMuscle ? (
        <>
          <div className="section-title"><div className="icon">ğŸ’ª</div> Ø§Ø®ØªØ± Ø§Ù„Ø¹Ø¶Ù„Ø©</div>
          {Object.entries(EXERCISES_DB).map(([key, muscle]) => (
            <div className="muscle-card" key={key} onClick={() => setSelectedMuscle(key)}>
              <div className="muscle-icon" style={{ background: `${muscle.color}20`, border: `1px solid ${muscle.color}40` }}>
                {muscle.icon}
              </div>
              <div className="muscle-info">
                <div className="muscle-name">{muscle.name}</div>
                <div className="muscle-count">{muscle.exercises.length} ØªÙ…Ø§Ø±ÙŠÙ† Ù…ØªØ§Ø­Ø©</div>
              </div>
              <span style={{ color: "var(--text-muted)", fontSize: 20 }}>â†</span>
            </div>
          ))}

          {workoutLog.length > 0 && (
            <>
              <div className="section-title"><div className="icon">ğŸ“‹</div> ØªÙ…Ø§Ø±ÙŠÙ† Ù…Ø³Ø¬Ù„Ø© ({workoutLog.length})</div>
              {workoutLog.map((log, i) => (
                <div className="card" key={i} style={{ margin: "6px 16px", padding: 12 }}>
                  <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                    <span style={{ fontWeight: 700 }}>{log.exercise.name}</span>
                    <span style={{ fontSize: 12, color: "var(--success)" }}>âœ“ {log.sets.filter(s => s.done).length} Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</span>
                  </div>
                  {log.rpe && <span style={{ fontSize: 12, color: "var(--text-dim)" }}>RPE: {log.rpe}</span>}
                </div>
              ))}
            </>
          )}

          {workoutActive && (
            <div style={{ padding: "16px", display: "flex", flexDirection: "column", gap: 8 }}>
              {workoutLog.length > 0 && (
                <button className="btn btn-primary btn-full" style={{ background: "linear-gradient(135deg, #FF8C00, #FF3E3E)" }} onClick={() => setActiveMode(true)}>
                  âš¡ ÙˆØ¶Ø¹ Ø§Ù„ØªÙ…Ø±ÙŠÙ† Ø§Ù„Ù†Ø´Ø·
                </button>
              )}
              <button className="btn btn-danger btn-full" onClick={endWorkout}>
                ğŸ Ø§Ù†Ù‡Ø§Ø¡ Ø§Ù„ØªÙ…Ø±ÙŠÙ†
              </button>
            </div>
          )}
        </>
      ) : (
        <>
          <div style={{ padding: "10px 16px" }}>
            <button className="btn btn-secondary btn-sm" onClick={() => setSelectedMuscle(null)}>
              â†’ Ø±Ø¬ÙˆØ¹
            </button>
          </div>
          <div className="section-title">
            <div className="icon">{EXERCISES_DB[selectedMuscle].icon}</div>
            ØªÙ…Ø§Ø±ÙŠÙ† {EXERCISES_DB[selectedMuscle].name}
          </div>
          {EXERCISES_DB[selectedMuscle].exercises.map(ex => (
            <div className="exercise-row" key={ex.id} style={{ margin: "0 16px" }}
              onClick={() => setSelectedExercise(ex)}>
              <div className="exercise-check" style={{ borderColor: EXERCISES_DB[selectedMuscle].color }}>
                {workoutLog.find(l => l.exercise.id === ex.id) && (
                  <span style={{ color: "var(--success)" }}>âœ“</span>
                )}
              </div>
              <div style={{ flex: 1 }}>
                <div className="exercise-name">{ex.name}</div>
                <div style={{ fontSize: 12, color: "var(--text-dim)" }}>{ex.sets} Ã— {ex.reps}</div>
              </div>
              <span className="exercise-type">{ex.type}</span>
            </div>
          ))}
        </>
      )}

      {selectedExercise && (
        <SetLogger exercise={selectedExercise} onSave={saveExerciseLog} onClose={() => setSelectedExercise(null)} />
      )}

      {/* Active Workout Mode Overlay */}
      {activeMode && workoutLog.length > 0 && (
        <div className="active-mode">
          <div className="active-header">
            <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 10 }}>
              <button className="btn btn-secondary btn-sm" onClick={() => setActiveMode(false)}>âœ• Ø§ØºÙ„Ø§Ù‚</button>
              <div className="active-timer">{formatTime(workoutTime)}</div>
              <button className="btn btn-danger btn-sm" onClick={endWorkout}>ğŸ Ø§Ù†Ù‡Ø§Ø¡</button>
            </div>
            <div className="active-quote">{QUOTES[Math.floor(workoutTime / 30) % QUOTES.length]}</div>
          </div>

          {/* Exercise Progress Dots */}
          <div className="active-progress">
            {workoutLog.map((_, i) => (
              <div key={i} className={`active-dot ${i < currentExIndex ? 'done' : ''} ${i === currentExIndex ? 'current' : ''}`} onClick={() => setCurrentExIndex(i)} />
            ))}
          </div>

          {/* Current Exercise */}
          {workoutLog[currentExIndex] && (
            <div className="active-exercise-card">
              <div style={{ fontSize: 12, color: "var(--text-dim)", marginBottom: 4 }}>
                ØªÙ…Ø±ÙŠÙ† {currentExIndex + 1} Ù…Ù† {workoutLog.length}
              </div>
              <div className="active-exercise-name">{workoutLog[currentExIndex].exercise.name}</div>
              <div className="active-exercise-detail">{workoutLog[currentExIndex].exercise.type}</div>
              <div style={{ marginTop: 16 }}>
                {workoutLog[currentExIndex].sets.filter(s => s.done).map((s, i) => (
                  <div key={i} style={{ display: "flex", justifyContent: "center", gap: 20, padding: "8px 0", borderBottom: "1px solid rgba(255,255,255,0.05)" }}>
                    <span style={{ color: "var(--accent)", fontWeight: 800 }}>Set {s.num}</span>
                    <span style={{ color: "var(--text)" }}>{s.weight} ÙƒØ¬Ù…</span>
                    <span style={{ color: "var(--accent2)" }}>{s.reps} ØªÙƒØ±Ø§Ø±</span>
                  </div>
                ))}
              </div>
              <div style={{ marginTop: 12, display: "flex", gap: 8, justifyContent: "center" }}>
                <div style={{ textAlign: "center" }}>
                  <div style={{ fontFamily: "'Bebas Neue'", fontSize: 32, color: "var(--accent)" }}>
                    {workoutLog[currentExIndex].sets.filter(s => s.done).length}
                  </div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
                </div>
                <div style={{ width: 1, background: "var(--border)", margin: "0 12px" }} />
                <div style={{ textAlign: "center" }}>
                  <div style={{ fontFamily: "'Bebas Neue'", fontSize: 32, color: "var(--accent2)" }}>
                    {workoutLog[currentExIndex].sets.filter(s => s.done).reduce((a, s) => a + (Number(s.weight) || 0) * (Number(s.reps) || 0), 0)}
                  </div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø­Ø¬Ù… ÙƒÙ„ÙŠ</div>
                </div>
                {workoutLog[currentExIndex].rpe && (
                  <>
                    <div style={{ width: 1, background: "var(--border)", margin: "0 12px" }} />
                    <div style={{ textAlign: "center" }}>
                      <div style={{ fontFamily: "'Bebas Neue'", fontSize: 32, color: "var(--accent3)" }}>
                        {workoutLog[currentExIndex].rpe}
                      </div>
                      <div style={{ fontSize: 11, color: "var(--text-dim)" }}>RPE</div>
                    </div>
                  </>
                )}
              </div>
            </div>
          )}

          {/* Nav Buttons */}
          <div style={{ display: "flex", gap: 8, padding: "12px 20px" }}>
            <button className="btn btn-secondary btn-full" disabled={currentExIndex === 0} onClick={() => setCurrentExIndex(i => i - 1)}> Ø§Ù„Ø³Ø§Ø¨Ù‚ â†’</button>
            <button className="btn btn-primary btn-full" disabled={currentExIndex >= workoutLog.length - 1} onClick={() => setCurrentExIndex(i => i + 1)}>â† Ø§Ù„ØªØ§Ù„ÙŠ</button>
          </div>

          {/* Total Summary */}
          <div style={{ margin: "8px 20px", padding: 16, background: "var(--bg-card)", borderRadius: "var(--radius)", border: "1px solid var(--border)" }}>
            <div style={{ fontWeight: 800, marginBottom: 8, textAlign: "center" }}>ğŸ“Š Ù…Ù„Ø®Øµ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</div>
            <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 8, textAlign: "center" }}>
              <div>
                <div style={{ fontFamily: "'Bebas Neue'", fontSize: 28, color: "var(--accent)" }}>{workoutLog.length}</div>
                <div style={{ fontSize: 11, color: "var(--text-dim)" }}>ØªÙ…Ø§Ø±ÙŠÙ†</div>
              </div>
              <div>
                <div style={{ fontFamily: "'Bebas Neue'", fontSize: 28, color: "var(--accent2)" }}>
                  {workoutLog.reduce((a, l) => a + l.sets.filter(s => s.done).length, 0)}
                </div>
                <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ù…Ø¬Ù…ÙˆØ¹Ø§Øª</div>
              </div>
              <div>
                <div style={{ fontFamily: "'Bebas Neue'", fontSize: 28, color: "var(--accent3)" }}>
                  {workoutLog.reduce((a, l) => a + l.sets.filter(s => s.done).reduce((b, s) => b + (Number(s.weight) || 0) * (Number(s.reps) || 0), 0), 0)}
                </div>
                <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø­Ø¬Ù… ÙƒÙ„ÙŠ</div>
              </div>
            </div>
          </div>
        </div>
      )}
    </div>
  );

  // NUTRITION PAGE
  const renderNutrition = () => {
    const remainingCals = targetCalories - consumedMacros.calories;
    const remainingProtein = macroTargets.protein - consumedMacros.protein;
    const remainingCarbs = macroTargets.carbs - consumedMacros.carbs;
    const remainingFat = macroTargets.fat - consumedMacros.fat;

    return (
      <div className="fade-in">
        <div style={{ padding: "10px 16px" }}>
          <button className="btn btn-secondary btn-sm" onClick={() => setPage("home")}>
            â†’ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          </button>
        </div>
        <div className="tabs">
          <button className={`tab ${nutritionTab === "meals" ? "active" : ""}`} onClick={() => setNutritionTab("meals")}>ğŸ½ï¸ Ø§Ù„ÙˆØ¬Ø¨Ø§Øª</button>
          <button className={`tab ${nutritionTab === "calc" ? "active" : ""}`} onClick={() => setNutritionTab("calc")}>ğŸ§® Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</button>
          <button className={`tab ${nutritionTab === "water" ? "active" : ""}`} onClick={() => setNutritionTab("water")}>ğŸ’§ Ø§Ù„Ù…Ø§Ø¡</button>
        </div>

        {nutritionTab === "meals" && (
          <>
            {/* Remaining Summary */}
            <div className="card card-glow" style={{ margin: "10px 16px" }}>
              <div style={{ textAlign: "center", marginBottom: 12 }}>
                <span style={{ fontSize: 14, color: "var(--text-dim)" }}>Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ù„ØªÙ‚ÙÙŠÙ„ Ø§Ù„ÙŠÙˆÙ…</span>
                <div style={{ fontFamily: "'Bebas Neue'", fontSize: 48, color: remainingCals >= 0 ? "#00DD66" : "#FF3E3E", letterSpacing: 2 }}>
                  {remainingCals}
                </div>
                <span style={{ fontSize: 13, color: "var(--text-dim)" }}>Ø³Ø¹Ø±Ø© Ø­Ø±Ø§Ø±ÙŠØ© ({targetCalories > 0 ? Math.round((consumedMacros.calories / targetCalories) * 100) : 0}% Ù…ÙƒØªÙ…Ù„)</span>
              </div>
              <div className="progress-bar" style={{ marginBottom: 12 }}>
                <div className="progress-fill" style={{ width: `${Math.min(100, targetCalories > 0 ? (consumedMacros.calories / targetCalories) * 100 : 0)}%`, background: "linear-gradient(90deg, #00DD66, #00AA44)" }} />
              </div>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 8, textAlign: "center" }}>
                <div>
                  <div style={{ fontWeight: 800, color: "#FF3E3E", fontSize: 18 }}>{Math.max(0, remainingProtein)}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø¨Ø±ÙˆØªÙŠÙ† Ù…ØªØ¨Ù‚ÙŠ</div>
                  <div style={{ fontSize: 10, color: "var(--accent2)" }}>{macroTargets.protein > 0 ? Math.round((consumedMacros.protein / macroTargets.protein) * 100) : 0}%</div>
                </div>
                <div>
                  <div style={{ fontWeight: 800, color: "#FF8C00", fontSize: 18 }}>{Math.max(0, remainingCarbs)}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>ÙƒØ§Ø±Ø¨ Ù…ØªØ¨Ù‚ÙŠ</div>
                  <div style={{ fontSize: 10, color: "var(--accent2)" }}>{macroTargets.carbs > 0 ? Math.round((consumedMacros.carbs / macroTargets.carbs) * 100) : 0}%</div>
                </div>
                <div>
                  <div style={{ fontWeight: 800, color: "#00D4FF", fontSize: 18 }}>{Math.max(0, remainingFat)}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø¯Ù‡ÙˆÙ† Ù…ØªØ¨Ù‚ÙŠ</div>
                  <div style={{ fontSize: 10, color: "var(--accent2)" }}>{macroTargets.fat > 0 ? Math.round((consumedMacros.fat / macroTargets.fat) * 100) : 0}%</div>
                </div>
              </div>
            </div>

            {/* Food Picker Button */}
            <div style={{ padding: "0 16px", display: "flex", gap: 8 }}>
              <button className="btn btn-primary btn-full" onClick={() => setShowFoodPicker(true)}>
                ğŸ½ï¸ Ø§Ø®ØªØ± Ù…Ù† Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø·Ø¹Ù…Ø©
              </button>
            </div>

            {/* Food Picker Modal */}
            {showFoodPicker && (
              <div className="modal-overlay" onClick={() => setShowFoodPicker(false)}>
                <div className="modal-content" onClick={e => e.stopPropagation()} style={{ maxHeight: "90vh" }}>
                  <div className="modal-handle" />
                  <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 12 }}>
                    <h3 style={{ fontWeight: 800, fontSize: 18 }}>ğŸ½ï¸ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ø·Ø¹Ù…Ø©</h3>
                    <button className="btn btn-secondary btn-sm" style={{ padding: "6px 12px" }} onClick={() => setShowFoodPicker(false)}>âœ•</button>
                  </div>
                  <input className="input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø·Ø¹Ø§Ù…..." value={foodSearch}
                    onChange={e => setFoodSearch(e.target.value)} style={{ marginBottom: 8 }} />
                  <div style={{ display: "flex", gap: 4, flexWrap: "wrap", marginBottom: 12 }}>
                    {FOOD_CATEGORIES.map(cat => (
                      <button key={cat} className={`btn btn-sm ${foodCat === cat ? 'btn-primary' : 'btn-secondary'}`}
                        style={{ padding: "4px 10px", fontSize: 11 }}
                        onClick={() => setFoodCat(cat)}>
                        {cat}
                      </button>
                    ))}
                  </div>
                  <div style={{ maxHeight: "50vh", overflowY: "auto" }}>
                    {FOOD_DB
                      .filter(f => (foodCat === "Ø§Ù„ÙƒÙ„" || f.cat === foodCat) && (!foodSearch || f.name.includes(foodSearch)))
                      .map(food => (
                        <div key={food.id} style={{
                          padding: 10, marginBottom: 6, background: "var(--bg-input)",
                          borderRadius: 10, border: "1px solid var(--border)"
                        }}>
                          <div style={{ display: "flex", alignItems: "center", gap: 8, marginBottom: 6 }}>
                            <span style={{ fontSize: 20 }}>{food.icon}</span>
                            <div style={{ flex: 1 }}>
                              <div style={{ fontWeight: 700, fontSize: 14 }}>{food.name}</div>
                              <div style={{ fontSize: 11, color: "var(--text-dim)" }}>
                                Ù„ÙƒÙ„ 100 Ø¬Ù…: {food.cal} Ø³Ø¹Ø±Ø© | Ø¨ {food.p}g | Ùƒ {food.c}g | Ø¯ {food.f}g
                              </div>
                            </div>
                          </div>
                          <div style={{ display: "flex", gap: 6, alignItems: "center" }}>
                            <input className="set-input" type="number" value={foodGrams}
                              onChange={e => setFoodGrams(Number(e.target.value))}
                              style={{ width: 70 }} />
                            <span style={{ fontSize: 12, color: "var(--text-dim)" }}>Ø¬Ù…</span>
                            <div style={{ flex: 1, fontSize: 11, color: "var(--accent2)", textAlign: "center" }}>
                              = {Math.round(food.cal * foodGrams / 100)} Ø³Ø¹Ø±Ø© | Ø¨ {Math.round(food.p * foodGrams / 10) / 10}g
                            </div>
                            <button className="btn btn-primary btn-sm" style={{ padding: "6px 12px" }}
                              onClick={() => addFoodFromDB(food, foodGrams)}>
                              + Ø§Ø¶Ù
                            </button>
                          </div>
                        </div>
                      ))}
                  </div>
                </div>
              </div>
            )}

            {/* Manual Meal Entry */}
            <div className="card" style={{ margin: "10px 16px" }}>
              <div style={{ fontWeight: 800, marginBottom: 12, fontSize: 15 }}>âœï¸ Ø§Ø¯Ø®Ø§Ù„ ÙŠØ¯ÙˆÙŠ (Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙˆØ§Ù„Ø¯Ù‡ÙˆÙ† ØªÙ†Ø­Ø³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠ)</div>
              <div style={{ display: "flex", flexDirection: "column", gap: 8 }}>
                <input className="input" placeholder="Ø§Ø³Ù… Ø§Ù„ÙˆØ¬Ø¨Ø©" value={mealForm.name}
                  onChange={e => setMealForm({ ...mealForm, name: e.target.value })} />
                <div style={{ display: "grid", gridTemplateColumns: "repeat(2, 1fr)", gap: 8 }}>
                  <div>
                    <div className="input-label">Ø¨Ø±ÙˆØªÙŠÙ† (Ø¬Ù…)</div>
                    <input className="input" type="number" placeholder="0" value={mealForm.protein}
                      onChange={e => {
                        const p = Number(e.target.value) || 0;
                        const c = Number(mealForm.carbs) || 0;
                        const f = Number(mealForm.fat) || 0;
                        setMealForm({ ...mealForm, protein: e.target.value, calories: String(p * 4 + c * 4 + f * 9) });
                      }} />
                  </div>
                  <div>
                    <div className="input-label">ÙƒØ§Ø±Ø¨ (Ø¬Ù…)</div>
                    <input className="input" type="number" placeholder="0" value={mealForm.carbs}
                      onChange={e => {
                        const p = Number(mealForm.protein) || 0;
                        const c = Number(e.target.value) || 0;
                        const f = Number(mealForm.fat) || 0;
                        setMealForm({ ...mealForm, carbs: e.target.value, calories: String(p * 4 + c * 4 + f * 9) });
                      }} />
                  </div>
                  <div>
                    <div className="input-label">Ø¯Ù‡ÙˆÙ† (Ø¬Ù…)</div>
                    <input className="input" type="number" placeholder="0" value={mealForm.fat}
                      onChange={e => {
                        const p = Number(mealForm.protein) || 0;
                        const c = Number(mealForm.carbs) || 0;
                        const f = Number(e.target.value) || 0;
                        setMealForm({ ...mealForm, fat: e.target.value, calories: String(p * 4 + c * 4 + f * 9) });
                      }} />
                  </div>
                  <div>
                    <div className="input-label">Ø§Ù„Ø³Ø¹Ø±Ø§Øª (ØªÙ„Ù‚Ø§Ø¦ÙŠ)</div>
                    <input className="input" type="number" placeholder="ØªÙ„Ù‚Ø§Ø¦ÙŠ" value={mealForm.calories}
                      style={{ background: "rgba(0,221,102,0.05)", borderColor: "rgba(0,221,102,0.2)" }}
                      onChange={e => setMealForm({ ...mealForm, calories: e.target.value })} />
                  </div>
                </div>
                <button className="btn btn-primary btn-full" onClick={addMeal}>Ø§Ø¶Ø§ÙØ© âœ“</button>
              </div>
            </div>

            {/* Smart Suggestions */}
            {getSuggestions.length > 0 && meals.length > 0 && (
              <div className="card" style={{ margin: "10px 16px", border: "1px solid rgba(255,140,0,0.3)" }}>
                <div style={{ fontWeight: 800, marginBottom: 10, fontSize: 15, color: "var(--accent2)" }}>ğŸ’¡ Ø§Ù‚ØªØ±Ø§Ø­Ø§Øª Ù„ØªÙ‚ÙÙŠÙ„ ÙŠÙˆÙ…Ùƒ</div>
                {getSuggestions.map((s, i) => (
                  <div key={i} style={{
                    display: "flex", alignItems: "center", gap: 8,
                    padding: 10, marginBottom: 6, background: "var(--bg-input)",
                    borderRadius: 8, border: "1px solid var(--border)"
                  }}>
                    <span style={{ fontSize: 20 }}>{s.food.icon}</span>
                    <div style={{ flex: 1 }}>
                      <div style={{ fontWeight: 700, fontSize: 13 }}>{s.food.name} ({s.grams}g)</div>
                      <div style={{ fontSize: 11, color: "var(--accent2)" }}>{s.reason}</div>
                    </div>
                    <button className="btn btn-primary btn-sm" style={{ padding: "5px 10px", fontSize: 11 }}
                      onClick={() => addFoodFromDB(s.food, s.grams)}>
                      + Ø§Ø¶Ù
                    </button>
                  </div>
                ))}
              </div>
            )}

            {/* Meals List */}
            {meals.length > 0 && (
              <div style={{ padding: "0 16px" }}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center", marginBottom: 8 }}>
                  <span style={{ fontWeight: 800 }}>ÙˆØ¬Ø¨Ø§Øª Ø§Ù„ÙŠÙˆÙ… ({meals.length})</span>
                  <button className="btn btn-danger btn-sm" onClick={resetDayMeals}>ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„ÙƒÙ„ (ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯)</button>
                </div>
                {meals.map(m => (
                  <div className="meal-entry" key={m.id}>
                    <div style={{ flex: 1 }}>
                      <div className="meal-name">{m.name}</div>
                      <div style={{ fontSize: 11, color: "var(--text-dim)" }}>
                        Ø¨Ø±ÙˆØªÙŠÙ†: {m.protein || 0}g | ÙƒØ§Ø±Ø¨: {m.carbs || 0}g | Ø¯Ù‡ÙˆÙ†: {m.fat || 0}g
                      </div>
                    </div>
                    <span className="meal-cals">{m.calories} Ø³Ø¹Ø±Ø©</span>
                    <button className="delete-btn" onClick={() => deleteMeal(m.id)}>âœ•</button>
                  </div>
                ))}
              </div>
            )}
          </>
        )}

        {nutritionTab === "calc" && (
          <div className="card" style={{ margin: "10px 16px" }}>
            <div style={{ fontWeight: 800, marginBottom: 16, fontSize: 16 }}>ğŸ§® Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„ÙŠÙˆÙ…ÙŠ</div>
            <div style={{ display: "flex", flexDirection: "column", gap: 12 }}>
              <div>
                <div className="input-label">Ø§Ù„ÙˆØ²Ù† (ÙƒØ¬Ù…)</div>
                <input className="input" type="number" value={userProfile.weight}
                  onChange={e => setUserProfile({ ...userProfile, weight: Number(e.target.value) })} />
              </div>
              <div>
                <div className="input-label">Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…)</div>
                <input className="input" type="number" value={userProfile.height}
                  onChange={e => setUserProfile({ ...userProfile, height: Number(e.target.value) })} />
              </div>
              <div>
                <div className="input-label">Ø§Ù„Ø¹Ù…Ø±</div>
                <input className="input" type="number" value={userProfile.age}
                  onChange={e => setUserProfile({ ...userProfile, age: Number(e.target.value) })} />
              </div>
              <div>
                <div className="input-label">Ø§Ù„Ø¬Ù†Ø³</div>
                <select className="input" value={userProfile.gender}
                  onChange={e => setUserProfile({ ...userProfile, gender: e.target.value })}>
                  <option value="male">Ø°ÙƒØ±</option>
                  <option value="female">Ø§Ù†Ø«Ù‰</option>
                </select>
              </div>
              <div>
                <div className="input-label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ù†Ø´Ø§Ø·</div>
                <select className="input" value={userProfile.activity}
                  onChange={e => setUserProfile({ ...userProfile, activity: e.target.value })}>
                  <option value="sedentary">Ø®Ø§Ù…Ù„ (Ù…ÙƒØªØ¨ÙŠ)</option>
                  <option value="light">Ø®ÙÙŠÙ (1-3 Ø§ÙŠØ§Ù…)</option>
                  <option value="moderate">Ù…ØªÙˆØ³Ø· (3-5 Ø§ÙŠØ§Ù…)</option>
                  <option value="active">Ù†Ø´ÙŠØ· (6-7 Ø§ÙŠØ§Ù…)</option>
                  <option value="very_active">Ù†Ø´ÙŠØ· Ø¬Ø¯Ø§ (Ø±ÙŠØ§Ø¶ÙŠ)</option>
                </select>
              </div>
              <div>
                <div className="input-label">Ø§Ù„Ù‡Ø¯Ù</div>
                <select className="input" value={userProfile.goal}
                  onChange={e => setUserProfile({ ...userProfile, goal: e.target.value })}>
                  <option value="cut">ØªÙ†Ø´ÙŠÙ (Ø®Ø³Ø§Ø±Ø© Ø¯Ù‡ÙˆÙ†)</option>
                  <option value="maintain">Ø«Ø¨Ø§Øª</option>
                  <option value="bulk">ØªØ¶Ø®ÙŠÙ… (Ø¨Ù†Ø§Ø¡ Ø¹Ø¶Ù„)</option>
                </select>
              </div>
            </div>

            <div style={{ marginTop: 20, padding: 16, background: "var(--bg-input)", borderRadius: 12, textAlign: "center" }}>
              <div style={{ fontSize: 13, color: "var(--text-dim)", marginBottom: 4 }}>BMR (Ù…Ø¹Ø¯Ù„ Ø§Ù„Ø§ÙŠØ¶)</div>
              <div style={{ fontFamily: "'Bebas Neue'", fontSize: 28, color: "var(--accent2)" }}>{Math.round(calcBMR)} Ø³Ø¹Ø±Ø©</div>
              <div style={{ fontSize: 13, color: "var(--text-dim)", marginTop: 12, marginBottom: 4 }}>TDEE (Ø§Ù„Ø§Ø­ØªÙŠØ§Ø¬ Ø§Ù„ÙƒÙ„ÙŠ)</div>
              <div style={{ fontFamily: "'Bebas Neue'", fontSize: 28, color: "var(--accent3)" }}>{tdee} Ø³Ø¹Ø±Ø©</div>
              <div style={{ fontSize: 13, color: "var(--text-dim)", marginTop: 12, marginBottom: 4 }}>Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø³ØªÙ‡Ø¯ÙØ©</div>
              <div style={{ fontFamily: "'Bebas Neue'", fontSize: 36, color: "var(--accent)" }}>{targetCalories} Ø³Ø¹Ø±Ø©</div>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(3, 1fr)", gap: 8, marginTop: 16, textAlign: "center" }}>
                <div>
                  <div style={{ fontWeight: 800, color: "#FF3E3E" }}>{macroTargets.protein}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø¨Ø±ÙˆØªÙŠÙ†</div>
                </div>
                <div>
                  <div style={{ fontWeight: 800, color: "#FF8C00" }}>{macroTargets.carbs}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>ÙƒØ§Ø±Ø¨</div>
                </div>
                <div>
                  <div style={{ fontWeight: 800, color: "#00D4FF" }}>{macroTargets.fat}g</div>
                  <div style={{ fontSize: 11, color: "var(--text-dim)" }}>Ø¯Ù‡ÙˆÙ†</div>
                </div>
              </div>
            </div>
          </div>
        )}

        {nutritionTab === "water" && (
          <div className="card" style={{ margin: "10px 16px", textAlign: "center" }}>
            <div style={{ fontWeight: 800, marginBottom: 8, fontSize: 16 }}>ğŸ’§ ØªØªØ¨Ø¹ Ø§Ù„Ù…Ø§Ø¡</div>
            <div style={{ fontSize: 13, color: "var(--text-dim)", marginBottom: 16 }}>
              Ø§Ù„Ù‡Ø¯Ù: {waterTarget} ÙƒÙˆØ¨ (250 Ù…Ù„ Ù„ÙƒÙ„ ÙƒÙˆØ¨)
            </div>
            <div style={{ fontFamily: "'Bebas Neue'", fontSize: 56, color: waterCount >= waterTarget ? "#00DD66" : "#00D4FF" }}>
              {waterCount} / {waterTarget}
            </div>
            <div className="progress-bar" style={{ margin: "16px 0" }}>
              <div className="progress-fill" style={{
                width: `${Math.min(100, (waterCount / waterTarget) * 100)}%`,
                background: "linear-gradient(90deg, #0088FF, #00CCFF)"
              }} />
            </div>
            <div className="water-drop">
              {Array.from({ length: waterTarget }, (_, i) => (
                <div key={i} className={`drop ${i < waterCount ? 'filled' : ''}`}
                  onClick={() => setWaterCount(i < waterCount ? i : i + 1)}>
                  <span>ğŸ’§</span>
                </div>
              ))}
            </div>
            <div style={{ display: "flex", gap: 8, marginTop: 16, justifyContent: "center" }}>
              <button className="btn btn-primary" onClick={() => setWaterCount(Math.min(waterCount + 1, waterTarget + 5))}>
                + ÙƒÙˆØ¨
              </button>
              <button className="btn btn-secondary" onClick={() => setWaterCount(Math.max(0, waterCount - 1))}>
                - ÙƒÙˆØ¨
              </button>
            </div>
          </div>
        )}
      </div>
    );
  };

  // BODY PAGE
  const renderBody = () => {
    const bmi = userProfile.weight && userProfile.height ? (userProfile.weight / ((userProfile.height / 100) ** 2)).toFixed(1) : 0;

    const addWeight = () => {
      if (!newWeightInput) return;
      setBodyWeight([...bodyWeight, { weight: Number(newWeightInput), date: new Date().toLocaleDateString('ar-SA') }]);
      setUserProfile({ ...userProfile, weight: Number(newWeightInput) });
      setNewWeightInput("");
    };

    return (
      <div className="fade-in">
        <div style={{ padding: "10px 16px" }}>
          <button className="btn btn-secondary btn-sm" onClick={() => setPage("home")}>
            â†’ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          </button>
        </div>
        <div className="tabs">
          <button className={`tab ${bodyTab === "weight" ? "active" : ""}`} onClick={() => setBodyTab("weight")}>âš–ï¸ Ø§Ù„ÙˆØ²Ù†</button>
          <button className={`tab ${bodyTab === "measure" ? "active" : ""}`} onClick={() => setBodyTab("measure")}>ğŸ“ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</button>
          <button className={`tab ${bodyTab === "stats" ? "active" : ""}`} onClick={() => setBodyTab("stats")}>ğŸ“Š Ø§Ø­ØµØ§Ø¦ÙŠØ§Øª</button>
        </div>

        {bodyTab === "weight" && (
          <>
            <div className="card card-glow" style={{ margin: "10px 16px", textAlign: "center" }}>
              <div style={{ fontSize: 13, color: "var(--text-dim)" }}>Ø§Ù„ÙˆØ²Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ</div>
              <div style={{ fontFamily: "'Bebas Neue'", fontSize: 56, color: "var(--accent)" }}>
                {userProfile.weight} <span style={{ fontSize: 24, color: "var(--text-dim)" }}>ÙƒØ¬Ù…</span>
              </div>
              <div style={{ display: "flex", gap: 12, justifyContent: "center", marginTop: 8 }}>
                <div>
                  <span style={{ fontSize: 13, color: "var(--text-dim)" }}>BMI: </span>
                  <span style={{ fontWeight: 700, color: bmi < 25 ? "#00DD66" : bmi < 30 ? "#FFaa00" : "#FF3E3E" }}>{bmi}</span>
                </div>
              </div>
            </div>

            <div className="card" style={{ margin: "10px 16px" }}>
              <div className="input-label">ØªØ³Ø¬ÙŠÙ„ ÙˆØ²Ù† Ø¬Ø¯ÙŠØ¯</div>
              <div style={{ display: "flex", gap: 8 }}>
                <input className="input" type="number" placeholder="Ø§Ù„ÙˆØ²Ù† Ø¨Ø§Ù„ÙƒØ¬Ù…" value={newWeightInput}
                  onChange={e => setNewWeightInput(e.target.value)} />
                <button className="btn btn-primary" onClick={addWeight}>Ø­ÙØ¸</button>
              </div>
            </div>

            {bodyWeight.length > 0 && (
              <div className="card" style={{ margin: "10px 16px" }}>
                <div style={{ fontWeight: 800, marginBottom: 12 }}>ğŸ“ˆ Ø³Ø¬Ù„ Ø§Ù„ÙˆØ²Ù†</div>
                <div className="mini-chart">
                  {bodyWeight.slice(-10).map((w, i) => {
                    const weights = bodyWeight.slice(-10).map(x => x.weight);
                    const min = Math.min(...weights) - 2;
                    const max = Math.max(...weights) + 2;
                    const h = ((w.weight - min) / (max - min)) * 100;
                    return (
                      <div key={i} className="chart-bar"
                        style={{ height: `${h}%`, background: `linear-gradient(to top, #FF3E3E, #FF8C00)` }}
                        title={`${w.weight} ÙƒØ¬Ù…`} />
                    );
                  })}
                </div>
                {bodyWeight.slice(-5).reverse().map((w, i) => (
                  <div key={i} className="measurement-row">
                    <span style={{ color: "var(--text-dim)", fontSize: 13 }}>{w.date}</span>
                    <span style={{ fontWeight: 700 }}>{w.weight} ÙƒØ¬Ù…</span>
                  </div>
                ))}
              </div>
            )}
          </>
        )}

        {bodyTab === "measure" && (
          <div className="card" style={{ margin: "10px 16px" }}>
            <div style={{ fontWeight: 800, marginBottom: 16, fontSize: 16 }}>ğŸ“ Ù‚ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¬Ø³Ù… (Ø³Ù…)</div>
            {[
              { key: "chest", label: "Ø§Ù„ØµØ¯Ø±", icon: "ğŸ«" },
              { key: "shoulder", label: "Ø§Ù„Ø§ÙƒØªØ§Ù", icon: "ğŸ‹ï¸" },
              { key: "arm", label: "Ø§Ù„Ø°Ø±Ø§Ø¹", icon: "ğŸ’ª" },
              { key: "waist", label: "Ø§Ù„Ø®ØµØ±", icon: "ğŸ“" },
              { key: "thigh", label: "Ø§Ù„ÙØ®Ø°", icon: "ğŸ¦µ" },
            ].map(m => (
              <div key={m.key} style={{ marginBottom: 12 }}>
                <div className="input-label">{m.icon} {m.label}</div>
                <input className="input" type="number" placeholder="Ø³Ù…"
                  value={measurements[m.key]}
                  onChange={e => setMeasurements({ ...measurements, [m.key]: e.target.value })} />
              </div>
            ))}
            <button className="btn btn-primary btn-full" style={{ marginTop: 8 }}>ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù‚ÙŠØ§Ø³Ø§Øª</button>
          </div>
        )}

        {bodyTab === "stats" && (
          <>
            <div className="stat-grid">
              <div className="stat-box">
                <div className="stat-val" style={{ color: "#FF3E3E" }}>{totalWorkouts}</div>
                <div className="stat-label">Ø§Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†</div>
              </div>
              <div className="stat-box">
                <div className="stat-val" style={{ color: "#FF8C00" }}>{streak}</div>
                <div className="stat-label">Ø§ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</div>
              </div>
              <div className="stat-box">
                <div className="stat-val" style={{ color: "#00DD66" }}>{workoutLog.length}</div>
                <div className="stat-label">ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…</div>
              </div>
              <div className="stat-box">
                <div className="stat-val" style={{ color: "#00D4FF" }}>{bmi}</div>
                <div className="stat-label">Ù…Ø¤Ø´Ø± BMI</div>
              </div>
            </div>

            <div className="card" style={{ margin: "10px 16px" }}>
              <div style={{ fontWeight: 800, marginBottom: 12 }}>ğŸ—“ï¸ Ù†Ø´Ø§Ø· Ø§Ù„Ø§Ø³Ø¨ÙˆØ¹</div>
              <div style={{ display: "grid", gridTemplateColumns: "repeat(7, 1fr)", gap: 6, textAlign: "center" }}>
                {WEEK_DAYS.map((d, i) => (
                  <div key={d}>
                    <div style={{ fontSize: 10, color: "var(--text-dim)", marginBottom: 4 }}>{d}</div>
                    <div style={{
                      width: 32, height: 32, borderRadius: 8, margin: "0 auto",
                      display: "flex", alignItems: "center", justifyContent: "center",
                      background: i < 5 ? "rgba(0,221,102,0.2)" : "var(--bg-input)",
                      border: `1px solid ${i < 5 ? "rgba(0,221,102,0.3)" : "var(--border)"}`,
                      fontSize: 14
                    }}>
                      {i < 5 ? "âœ“" : ""}
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="card" style={{ margin: "10px 16px" }}>
              <div style={{ fontWeight: 800, marginBottom: 12 }}>ğŸ’¡ Ù†ØµÙŠØ­Ø© Ø§Ù„ÙŠÙˆÙ…</div>
              <p style={{ fontSize: 14, color: "var(--text-dim)", lineHeight: 1.8 }}>
                Ù„Ø§ ØªÙ†Ø³Ù‰ ØªØ§Ø®Ø° ÙŠÙˆÙ… Ø±Ø§Ø­Ø© ÙƒÙ„ 3-4 Ø§ÙŠØ§Ù… ØªÙ…Ø±ÙŠÙ† Ø¹Ø´Ø§Ù† Ø¹Ø¶Ù„Ø§ØªÙƒ ØªØªØ¹Ø§ÙÙ‰ ÙˆØªÙ†Ù…Ùˆ. Ø§Ù„ØªØ¹Ø§ÙÙŠ Ø¬Ø²Ø¡ Ø§Ø³Ø§Ø³ÙŠ Ù…Ù† Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ùˆ Ø¨Ø³ Ø§Ù„ØªÙ…Ø±ÙŠÙ†! ğŸ§ ğŸ’ª
              </p>
            </div>
          </>
        )}
      </div>
    );
  };

  // PROGRAMS PAGE
  const renderPrograms = () => {
    return (
      <div className="fade-in">
        <div style={{ padding: "10px 16px" }}>
          <button className="btn btn-secondary btn-sm" onClick={() => { setPage("home"); setSelectedProgram(null); }}>
            â†’ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
          </button>
        </div>
        <div className="section-title"><div className="icon">ğŸ“‹</div> Ø¨Ø±Ø§Ù…Ø¬ Ø§Ù„ØªÙ…Ø±ÙŠÙ†</div>

        {!selectedProgram ? (
          <>
            {Object.entries(SPLIT_TEMPLATES).map(([key, prog]) => (
              <div className="card" key={key} style={{ margin: "8px 16px", cursor: "pointer" }}
                onClick={() => setSelectedProgram(key)}>
                <div style={{ display: "flex", justifyContent: "space-between", alignItems: "center" }}>
                  <div>
                    <div style={{ fontWeight: 800, fontSize: 16 }}>{prog.name}</div>
                    <div style={{ fontSize: 12, color: "var(--text-dim)", marginTop: 4 }}>
                      {prog.days.filter(d => d !== "Ø±Ø§Ø­Ø©").length} Ø§ÙŠØ§Ù… ØªÙ…Ø±ÙŠÙ† / Ø§Ø³Ø¨ÙˆØ¹
                    </div>
                  </div>
                  <span style={{ fontSize: 24 }}>â†</span>
                </div>
                <div style={{ display: "flex", gap: 4, marginTop: 10 }}>
                  {prog.days.map((d, i) => (
                    <div key={i} style={{
                      flex: 1, textAlign: "center", padding: "6px 2px",
                      background: d === "Ø±Ø§Ø­Ø©" ? "var(--bg-input)" : "rgba(255,62,62,0.1)",
                      border: `1px solid ${d === "Ø±Ø§Ø­Ø©" ? "var(--border)" : "rgba(255,62,62,0.2)"}`,
                      borderRadius: 6, fontSize: 9, fontWeight: 600,
                      color: d === "Ø±Ø§Ø­Ø©" ? "var(--text-muted)" : "var(--accent)"
                    }}>
                      {d === "Ø±Ø§Ø­Ø©" ? "ğŸ˜´" : d.substring(0, 4)}
                    </div>
                  ))}
                </div>
              </div>
            ))}

            <div className="card" style={{ margin: "8px 16px", border: "1px dashed var(--accent)", textAlign: "center", cursor: "pointer", padding: 24 }}>
              <div style={{ fontSize: 28, marginBottom: 8 }}>âœ¨</div>
              <div style={{ fontWeight: 800 }}>Ø§Ù†Ø´Ø§Ø¡ Ø¨Ø±Ù†Ø§Ù…Ø¬ Ù…Ø®ØµØµ</div>
              <div style={{ fontSize: 12, color: "var(--text-dim)", marginTop: 4 }}>ØµÙ…Ù… Ø¨Ø±Ù†Ø§Ù…Ø¬Ùƒ Ø§Ù„Ø®Ø§Øµ Ù…Ù† Ø§Ù„ØµÙØ±</div>
            </div>

            {/* Training Tips */}
            <div className="section-title"><div className="icon">ğŸ“–</div> Ù†ØµØ§Ø¦Ø­ ØªØ¯Ø±ÙŠØ¨ÙŠØ©</div>
            {[
              { title: "Progressive Overload", desc: "Ø²Ø¯ Ø§Ù„ÙˆØ²Ù† 2.5-5 ÙƒØ¬Ù… ÙƒÙ„ Ø§Ø³Ø¨ÙˆØ¹ Ù„Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù…Ø±ÙƒØ¨Ø©", icon: "ğŸ“ˆ" },
              { title: "Deload Week", desc: "ÙƒÙ„ 4-6 Ø§Ø³Ø§Ø¨ÙŠØ¹ Ø®ÙÙ Ø§Ù„Ø§ÙˆØ²Ø§Ù† 40-60% Ù„Ø§Ø³Ø¨ÙˆØ¹ ÙˆØ§Ø­Ø¯", icon: "ğŸ§˜" },
              { title: "Ø­Ø¬Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†", desc: "10-20 Ù…Ø¬Ù…ÙˆØ¹Ø© Ù„ÙƒÙ„ Ø¹Ø¶Ù„Ø© Ø§Ø³Ø¨ÙˆØ¹ÙŠØ§ Ù„Ù„Ù†Ù…Ùˆ Ø§Ù„Ø§Ù…Ø«Ù„", icon: "ğŸ“Š" },
              { title: "Ø§Ù„Ø±Ø§Ø­Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø§Øª", desc: "2-3 Ø¯Ù‚Ø§Ø¦Ù‚ Ù„Ù„Ù…Ø±ÙƒØ¨ØŒ 60-90 Ø«Ø§Ù†ÙŠØ© Ù„Ù„Ø¹Ø²Ù„", icon: "â±ï¸" },
            ].map((tip, i) => (
              <div className="card" key={i} style={{ margin: "6px 16px", padding: 14 }}>
                <div style={{ display: "flex", gap: 10, alignItems: "flex-start" }}>
                  <span style={{ fontSize: 24 }}>{tip.icon}</span>
                  <div>
                    <div style={{ fontWeight: 700, fontSize: 14 }}>{tip.title}</div>
                    <div style={{ fontSize: 13, color: "var(--text-dim)", marginTop: 4, lineHeight: 1.6 }}>{tip.desc}</div>
                  </div>
                </div>
              </div>
            ))}
          </>
        ) : (
          <>
            <div style={{ padding: "10px 16px" }}>
              <button className="btn btn-secondary btn-sm" onClick={() => setSelectedProgram(null)}>â†’ Ø±Ø¬ÙˆØ¹</button>
            </div>
            <div className="card" style={{ margin: "10px 16px" }}>
              <h3 style={{ fontWeight: 800, fontSize: 18, marginBottom: 16 }}>{SPLIT_TEMPLATES[selectedProgram].name}</h3>
              {SPLIT_TEMPLATES[selectedProgram].days.map((day, i) => (
                <div key={i} style={{
                  display: "flex", alignItems: "center", gap: 12,
                  padding: 12, marginBottom: 6,
                  background: day === "Ø±Ø§Ø­Ø©" ? "var(--bg-input)" : "rgba(255,62,62,0.05)",
                  borderRadius: 10, border: `1px solid ${day === "Ø±Ø§Ø­Ø©" ? "var(--border)" : "rgba(255,62,62,0.15)"}`
                }}>
                  <div style={{
                    width: 36, height: 36, borderRadius: 8,
                    background: day === "Ø±Ø§Ø­Ø©" ? "var(--bg-card)" : "linear-gradient(135deg, #FF3E3E, #CC2200)",
                    display: "flex", alignItems: "center", justifyContent: "center",
                    fontWeight: 800, fontSize: 14, color: "white"
                  }}>
                    {day === "Ø±Ø§Ø­Ø©" ? "ğŸ˜´" : WEEK_DAYS[i].charAt(0)}
                  </div>
                  <div>
                    <div style={{ fontWeight: 700 }}>{WEEK_DAYS[i]}</div>
                    <div style={{ fontSize: 12, color: "var(--text-dim)" }}>{day}</div>
                  </div>
                </div>
              ))}
              <button className="btn btn-primary btn-full" style={{ marginTop: 16 }}>
                âœ… ØªÙØ¹ÙŠÙ„ Ù‡Ø°Ø§ Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬
              </button>
            </div>
          </>
        )}
      </div>
    );
  };

  // NAV ITEMS
  const navItems = [
    { id: "home", icon: "ğŸ ", label: "Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" },
    { id: "workout", icon: "ğŸ‹ï¸", label: "Ø§Ù„ØªÙ…Ø±ÙŠÙ†" },
    { id: "nutrition", icon: "ğŸ½ï¸", label: "Ø§Ù„ØªØºØ°ÙŠØ©" },
    { id: "body", icon: "ğŸ“", label: "Ø§Ù„Ø¬Ø³Ù…" },
    { id: "programs", icon: "ğŸ“‹", label: "Ø§Ù„Ø¨Ø±Ø§Ù…Ø¬" },
  ];

  return (
    <>
      <style>{CSS}</style>
      <div className="app-bg" />
      <div className="app-container">
        <div className="header">
          <div className="logo-title">BEAST MODE</div>
          <div className="logo-sub">Ù„Ø§ Ù…ÙƒØ§Ù† Ù„Ù„Ø¶Ø¹Ù Ù‡Ù†Ø§</div>
        </div>

        {page === "home" && renderHome()}
        {page === "workout" && renderWorkout()}
        {page === "nutrition" && renderNutrition()}
        {page === "body" && renderBody()}
        {page === "programs" && renderPrograms()}

        <nav className="nav-bar">
          {navItems.map(item => (
            <button key={item.id} className={`nav-item ${page === item.id ? 'active' : ''}`}
              onClick={() => setPage(item.id)}>
              <span className="nav-icon">{item.icon}</span>
              {item.label}
            </button>
          ))}
        </nav>
      </div>
    </>
  );
}


ReactDOM.createRoot(document.getElementById('root')).render(React.createElement(GymBeastApp));
</script>
</body>
</html>